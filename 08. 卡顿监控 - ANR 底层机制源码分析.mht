From: WizMime<support@wiz.cn>
Subject: =?gb2312?B?MDguIL+ottm84L/YIC0gQU5SILXXsuO7+tbG1LTC67fWzvY=?=
Date: Date: Sun, 14 Mar 2021 22:07:42 +0800
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_Next_Part_0071941827.467"

This is a multi-part message in MIME format.

------=_Next_Part_0071941827.467
Content-Type: multipart/alternative;
	boundary="----=_Next_Part_0023980609.334"


------=_Next_Part_0023980609.334
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

This is a multi-part message in MIME format.

------=_Next_Part_0023980609.334
Content-Type: text/html;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML><html><head>=0D=0A<meta http-equiv=3D"Content-Type=
" content=3D"text/html; charset=3Dgb2312">=0A=0A=0A<title>08. =BF=
=A8=B6=D9=BC=E0=BF=D8 - ANR =B5=D7=B2=E3=BB=FA=D6=C6=D4=B4=C2=EB=B7=
=D6=CE=F6</title>=0A    =0A<style id=3D"wiz_custom_css">html, .wi=
z-editor-body {font-size: 12pt;}.wiz-editor-body {font-family: He=
lvetica, 'Hiragino Sans GB', '=CE=A2=C8=ED=D1=C5=BA=DA', 'Microso=
ft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.7;=
margin: 0 auto;position:relative;padding: 20px 16px;}.wiz-editor-=
body h1,.wiz-editor-body h2,.wiz-editor-body h3,.wiz-editor-body=20=
h4,.wiz-editor-body h5,.wiz-editor-body h6 {margin:20px 0 10px;ma=
rgin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}.wiz-editor=
-body h1 {font-size:20pt;font-size:1.67rem;}.wiz-editor-body h2 {=
font-size:18pt;font-size:1.5rem;}.wiz-editor-body h3 {font-size:1=
5pt;font-size:1.25rem;}.wiz-editor-body h4 {font-size:14pt;font-s=
ize:1.17rem;}.wiz-editor-body h5 {font-size:12pt;font-size:1rem;}=
.wiz-editor-body h6 {font-size:12pt;font-size:1rem;color: #777777=
;margin: 1rem 0;}.wiz-editor-body div,.wiz-editor-body p,.wiz-edi=
tor-body ul,.wiz-editor-body ol,.wiz-editor-body dl,.wiz-editor-b=
ody li {margin:8px 0 0;}.wiz-editor-body blockquote,.wiz-editor-b=
ody table,.wiz-editor-body pre,.wiz-editor-body code {margin:8px=20=
0;}.wiz-editor-body .CodeMirror pre {margin:0;}.wiz-editor-body a=
 {word-wrap: break-word;text-decoration-skip-ink: none;}.wiz-edit=
or-body ul,.wiz-editor-body ol {padding-left:32px;padding-left:2r=
em;}.wiz-editor-body ol.wiz-list-level1 > li {list-style-type:dec=
imal;}.wiz-editor-body ol.wiz-list-level2 > li {list-style-type:l=
ower-latin;}.wiz-editor-body ol.wiz-list-level3 > li {list-style-=
type:lower-roman;}.wiz-editor-body li.wiz-list-align-style {list-=
style-position: inside; margin-left: -1em;}.wiz-editor-body block=
quote {padding: 0 12px;}.wiz-editor-body blockquote > :first-chil=
d {margin-top:0;}.wiz-editor-body blockquote > :last-child {margi=
n-bottom:0;}.wiz-editor-body img {border:0;max-width:100%;height:=
auto !important;margin:2px 0;padding: 2px;vertical-align:bottom;}=
.wiz-editor-body table {border-collapse:collapse;border:1px solid=
 #a7afbc;}.wiz-editor-body td,.wiz-editor-body th {padding:4px 8p=
x;border-collapse:collapse;border:1px solid #a7afbc;min-height:28=
px;word-break:break-word;box-sizing: border-box;}.wiz-editor-body=
 td > div:first-child {margin-top:0;}.wiz-editor-body td > div:la=
st-child {margin-bottom:0;}.wiz-editor-body img.wiz-svg-image {bo=
x-shadow:1px 1px 4px #E8E8E8;}.wiz-editor-body .wiz-image-contain=
er {margin:0;max-width: 100%;display: inline-flex;flex-direction:=
 column;}.wiz-editor-body .wiz-image-container .wiz-image-title {=
display:inline-block;text-align: center;color: #a7afbc;line-heigh=
t: 18px;font-size: 12px;min-height: 18px;width: 100%;white-space:=
 normal;}.wiz-hide {display:none !important;}.wiz-editor-body.wiz=
-editor-outline {padding-right:0; padding-left:0;}.wiz-editor-bod=
y.wiz-editor-outline .outline-container {margin:0; padding:0; lin=
e-height:1.5;}.wiz-editor-body.wiz-editor-outline .outline-contai=
ner div {margin:0;}.wiz-editor-body.wiz-editor-outline .node {mar=
gin:0; padding: 0;}.wiz-editor-body.wiz-editor-outline .outline-c=
ontainer > .node {margin-right:24px; margin-left:30px;}.wiz-edito=
r-body.wiz-editor-outline .node.collapsed .children {display:none=
;}.wiz-editor-body.wiz-editor-outline .node .row {position:relati=
ve; padding-left:26px;}.wiz-editor-body.wiz-editor-outline .node=20=
.operator-container {width:36px;position:absolute; top:4px; left:=
-18px;}.wiz-editor-body.wiz-editor-outline .node .operator-bar {p=
osition:absolute; top:0; left:0; right:0; bottom:0; display:flex;=
 align-items:center; justify-content:center;}.wiz-editor-body.wiz=
-editor-outline .node .switch {width:18px; height:18px;display:fl=
ex;flex-direction: column;align-items: center;overflow: hidden;}.=
wiz-editor-body.wiz-editor-outline .node .switch i {font-size:20p=
x;position:relative;left:-1px;top:-1px;}.wiz-editor-body.wiz-edit=
or-outline .node .switch.active {cursor:pointer;color:transparent=
; transition:transform 200ms ease 0s;}.wiz-editor-body.wiz-editor=
-outline .node.collapsed .switch.active {transform:rotateZ(-90deg=
);}.wiz-editor-body.wiz-editor-outline .node .row:hover .switch.a=
ctive {color:#505F79}.wiz-editor-body.wiz-editor-outline .node .d=
ot {display:flex; align-items:center; justify-content:center; bor=
der-radius:100%; width:18px; height:18px;}.wiz-editor-body.wiz-ed=
itor-outline .node.collapsed .dot {background-color:rgba(80, 95,=20=
121, .15);}.wiz-editor-body.wiz-editor-outline .node .dot-icon {b=
ackground-color:#505F79; border-radius:100%; width:6px; height:6p=
x;}.wiz-editor-body.wiz-editor-outline .node .child {margin-left:=
8px; border-left:1px solid #E6E9ED; padding-left:17px;}.wiz-edito=
r-body.wiz-editor-outline .node .content {flex:1;outline:none; pa=
dding:4px 0;}.wiz-editor-body.wiz-editor-outline .node div.conten=
t {font-size:1rem;}.wiz-editor-body.wiz-editor-outline .node.comp=
lete > .row .content {text-decoration:line-through;color:#A7AFBC;=
}.wiz-editor-body.wiz-editor-outline .node .notes {outline:none;=20=
font-size:.8rem; color:#A7AFBC;}.wiz-editor-body.wiz-editor-outli=
ne .node .image {outline:none; padding-top:4px; padding-bottom:4p=
x;}.wiz-editor-body.wiz-editor-outline .outline-container h1,.wiz=
-editor-body.wiz-editor-outline .outline-container h2,.wiz-editor=
-body.wiz-editor-outline .outline-container h3,.wiz-editor-body.w=
iz-editor-outline .outline-container h4,.wiz-editor-body.wiz-edit=
or-outline .outline-container h5,.wiz-editor-body.wiz-editor-outl=
ine .outline-container h6 {margin:0;}body, .wiz-editor-body {  pa=
dding-left: 48px;  padding-right: 48px;}</style><style id=3D"wiz_=
code_style">.wiz-editor-body .wiz-code-container{position: relati=
ve; padding:8px 0; margin: 5px 0;text-indent:0; text-align:left;}=
.CodeMirror {font-family: Consolas, "Liberation Mono", Menlo, Cou=
rier, monospace; color: black; font-size: 10.5pt; font-size: 0.87=
5rem}.wiz-editor-body .wiz-code-container .CodeMirror div {margin=
-top: 0; margin-bottom: 0;}.CodeMirror-lines {padding: 4px 0;}.Co=
deMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like=
 {padding: 0 4px;}.CodeMirror pre.CodeMirror-line {min-height: 24=
px;}.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {back=
ground-color: white;}.CodeMirror-gutters {border-right: 1px solid=
 #ddd; background-color: #f7f7f7; white-space: nowrap;}.CodeMirro=
r-linenumbers {}.CodeMirror-linenumber {padding: 0 3px 0 5px; min=
-width: 20px; text-align: right; color: #999; white-space: nowrap=
;}.CodeMirror-guttermarker {color: black;}.CodeMirror-guttermarke=
r-subtle {color: #999;}.CodeMirror-cursor {border-left: 1px solid=
 black; border-right: none; width: 0;}.CodeMirror div.CodeMirror-=
secondarycursor {border-left: 1px solid silver;}.cm-fat-cursor .C=
odeMirror-cursor {width: auto; border: 0 !important; background:=20=
#7e7;}.cm-fat-cursor div.CodeMirror-cursors {z-index: 1;}.cm-fat-=
cursor-mark {background-color: rgba(20, 255, 20, 0.5);-webkit-ani=
mation: blink 1.06s steps(1) infinite;-moz-animation: blink 1.06s=
 steps(1) infinite;animation: blink 1.06s steps(1) infinite;}.cm-=
animate-fat-cursor {width: auto; border: 0; -webkit-animation: bl=
ink 1.06s steps(1) infinite; -moz-animation: blink 1.06s steps(1)=
 infinite; animation: blink 1.06s steps(1) infinite; background-c=
olor: #7e7;}@-moz-keyframes blink {  0% {}  50% { background-colo=
r: transparent; }  100% {}}@-webkit-keyframes blink {  0% {}  50%=
 { background-color: transparent; }  100% {}}@keyframes blink { =20=
0% {}  50% { background-color: transparent; }  100% {}}.CodeMirro=
r-overwrite .CodeMirror-cursor {}.cm-tab { display: inline-block;=
 text-decoration: inherit; }.CodeMirror-rulers {position: absolut=
e; left: 0; right: 0; top: -50px; bottom: -20px; overflow: hidden=
;}.CodeMirror-ruler {border-left: 1px solid #ccc; top: 0; bottom:=
 0; position: absolute;}.cm-s-default .cm-header {color: blue;}.c=
m-s-default .cm-quote {color: #090;}.cm-negative {color: #d44;}.c=
m-positive {color: #292;}.cm-header, .cm-strong {font-weight: bol=
d;}.cm-em {font-style: italic;}.cm-link {text-decoration: underli=
ne;}.cm-strikethrough {text-decoration: line-through;}.cm-s-defau=
lt .cm-keyword {color: #708;}.cm-s-default .cm-atom {color: #219;=
}.cm-s-default .cm-number {color: #164;}.cm-s-default .cm-def {co=
lor: #00f;}.cm-s-default .cm-variable,.cm-s-default .cm-punctuati=
on,.cm-s-default .cm-property,.cm-s-default .cm-operator {}.cm-s-=
default .cm-variable-2 {color: #05a;}.cm-s-default .cm-variable-3=
 {color: #085;}.cm-s-default .cm-comment {color: #a50;}.cm-s-defa=
ult .cm-string {color: #a11;}.cm-s-default .cm-string-2 {color: #=
f50;}.cm-s-default .cm-meta {color: #555;}.cm-s-default .cm-quali=
fier {color: #555;}.cm-s-default .cm-builtin {color: #30a;}.cm-s-=
default .cm-bracket {color: #997;}.cm-s-default .cm-tag {color: #=
170;}.cm-s-default .cm-attribute {color: #00c;}.cm-s-default .cm-=
hr {color: #999;}.cm-s-default .cm-link {color: #00c;}.cm-s-defau=
lt .cm-error {color: #f00;}.cm-invalidchar {color: #f00;}.CodeMir=
ror-composing { border-bottom: 2px solid; }div.CodeMirror span.Co=
deMirror-matchingbracket {color: #0b0;}div.CodeMirror span.CodeMi=
rror-nonmatchingbracket {color: #a22;}.CodeMirror-matchingtag { b=
ackground: rgba(255, 150, 0, .3); }.CodeMirror-activeline-backgro=
und {background: #e8f2ff;}.CodeMirror {position: relative; backgr=
ound: #f5f5f5;}.CodeMirror-scroll {overflow: hidden !important; m=
argin-bottom: 0; margin-right: -30px; padding: 16px 30px 16px 0;=20=
outline: none; position: relative;}.CodeMirror-sizer {position: r=
elative; border-right: 30px solid transparent;}.CodeMirror-vscrol=
lbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .Code=
Mirror-gutter-filler {position: absolute; z-index: 6; display: no=
ne;}.CodeMirror-vscrollbar {right: 0; top: 0; overflow-x: hidden;=
 overflow-y: scroll;}.CodeMirror-hscrollbar {bottom: 0; left: 0 !=
important; overflow-y: hidden; overflow-x: scroll;pointer-events:=
 auto !important;outline: none;}.CodeMirror-scrollbar-filler {rig=
ht: 0; bottom: 0;}.CodeMirror-gutter-filler {left: 0; bottom: 0;}=
.CodeMirror-gutters {position: absolute; left: 0; top: 0; min-hei=
ght: 100%; z-index: 3;}.CodeMirror-gutter {white-space: normal; h=
eight: 100%; display: inline-block; vertical-align: top; margin-b=
ottom: -30px;}.CodeMirror-gutter-wrapper {position: absolute; z-i=
ndex: 4; background: none !important; border: none !important;}.C=
odeMirror-gutter-background {position: absolute; top: 0; bottom:=20=
0; z-index: 4;}.CodeMirror-gutter-elt {position: absolute; cursor=
: default; z-index: 4;}.CodeMirror-gutter-wrapper ::selection { b=
ackground-color: transparent }.CodeMirror-gutter-wrapper ::-moz-s=
election { background-color: transparent }.CodeMirror-lines {curs=
or: text; min-height: 1px;}.CodeMirror pre.CodeMirror-line,.CodeM=
irror pre.CodeMirror-line-like {-moz-border-radius: 0; -webkit-bo=
rder-radius: 0; border-radius: 0; border-width: 0; background: tr=
ansparent; font-family: inherit; font-size: inherit; margin: 0; w=
hite-space: pre; word-wrap: normal; line-height: inherit; color:=20=
inherit; z-index: 2; position: relative; overflow: visible; -webk=
it-tap-highlight-color: transparent; -webkit-font-variant-ligatur=
es: contextual; font-variant-ligatures: contextual;}.CodeMirror-w=
rap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like=
 {word-wrap: break-word; white-space: pre-wrap; word-break: norma=
l;}.CodeMirror-linebackground {position: absolute; left: 0; right=
: 0; top: 0; bottom: 0; z-index: 0;}.CodeMirror-linewidget {posit=
ion: relative; z-index: 2; padding: 0.1px;}.CodeMirror-widget {}.=
CodeMirror-rtl pre { direction: rtl; }.CodeMirror-code {outline:=20=
none;}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.Co=
deMirror-gutters,.CodeMirror-linenumber {-moz-box-sizing: content=
-box; box-sizing: content-box;}.CodeMirror-measure {position: abs=
olute; width: 100%; height: 0; overflow: hidden; visibility: hidd=
en;}.CodeMirror-cursor {position: absolute; pointer-events: none;=
}.CodeMirror-measure pre { position: static; }div.CodeMirror-curs=
ors {visibility: hidden; position: relative; z-index: 3;}div.Code=
Mirror-dragcursors {visibility: visible;}.CodeMirror-focused div.=
CodeMirror-cursors {visibility: visible;}.CodeMirror-selected { b=
ackground: #d9d9d9; }.CodeMirror-focused .CodeMirror-selected { b=
ackground: #d7d4f0; }.CodeMirror-crosshair { cursor: crosshair; }=
.CodeMirror-line::selection, .CodeMirror-line > span::selection,=20=
.CodeMirror-line > span > span::selection { background: #d7d4f0;=20=
}.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-=
selection, .CodeMirror-line > span > span::-moz-selection { backg=
round: #d7d4f0; }.cm-searching {background: #ffa; background: rgb=
a(255, 255, 0, .4);}.cm-force-border { padding-right: .1px; }@med=
ia print {  .CodeMirror div.CodeMirror-cursors {visibility: hidde=
n;}}.cm-tab-wrap-hack:after { content: ""; }span.CodeMirror-selec=
tedtext { background: none; }.CodeMirror-activeline-background, .=
CodeMirror-selected {transition: visibility 0ms 100ms;}.CodeMirro=
r-blur .CodeMirror-activeline-background, .CodeMirror-blur .CodeM=
irror-selected {visibility:hidden;}.CodeMirror-blur .CodeMirror-m=
atchingbracket {color:inherit !important;outline:none !important;=
text-decoration:none !important;}.CodeMirror-sizer {min-height:au=
to !important;}</style></head>=0A=0A<body class=3D"wiz-editor-bod=
y "  data-wiz-document-type=3D"common" spellcheck=3D"false"><div>=
1. =CD=EA=C9=C6&nbsp; native =B2=E3=B6=D1=D5=BB=BD=E2=CE=F6</div>=
<div><br></div><div><br></div><div>2. =CB=C4=B4=F3=D7=E9=BC=FE AN=
R =BB=FA=D6=C6=D4=AD=C0=ED=B7=D6=CE=F6</div><div>=D4=AD=C0=ED=CA=C7=
=D2=BB=B8=F6=A3=BA=C2=F1=D5=A8=B5=AF=B2=F0=D5=A8=B5=AF=B5=C4=D2=BB=
=B8=F6=B9=FD=B3=CC</div><div><br></div><div id=3D"wiz_cm_16157287=
41470_2050" class=3D"wiz-code-container"  data-mode=3D"JavaScript=
" data-theme=3D"default"><textarea style=3D"display: none;">	priv=
ate final void realStartServiceLocked(ServiceRecord r,=0A       =20=
    ProcessRecord app, boolean execInFg) throws RemoteException {=
=0A        // ANR =B5=C4=D4=AD=D2=F2=CA=C7=D3=C9=D3=DA=D5=E2=C0=EF=
=D3=D0=BC=E0=BF=D8=0A        bumpServiceExecutingLocked(r, execIn=
Fg, "create");=0A        try {=0A            // =C6=F4=B6=AF=D3=A6=
=D3=C3=B5=C4 Service=A3=ACthread -&gt; ActivityThread=0A        =20=
   app.thread.scheduleCreateService(r, r.serviceInfo,=0A        =20=
           mAm.compatibilityInfoForPackageLocked(r.serviceInfo.ap=
plicationInfo),=0A                    app.repProcState);=0A     =20=
  } catch (DeadObjectException e) {=0A            Slog.w(TAG, "Ap=
plication dead when creating service " + r);=0A            mAm.ap=
pDiedLocked(app);=0A            throw e;=0A        } finally {=0A=
            ...=0A        }=0A    }</textarea><wiz_code_mirror><d=
iv class=3D"CodeMirror cm-s-default" data-id=3D"wiz_cm_1615728741=
470_2050"><div style=3D"overflow: hidden; position: relative; wid=
th: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorre=
ct=3D"off" autocapitalize=3D"off" spellcheck=3D"false" tabindex=3D=
"0" style=3D"position: absolute; bottom: -1em; padding: 0px; widt=
h: 1000px; height: 1em; outline: none;"></textarea></div><div cla=
ss=3D" wiz-hide wiz_CodeMirror-vscrollbar" tabindex=3D"-1" cm-not=
-content=3D"true" style=3D"width: 18px; pointer-events: none;"><d=
iv style=3D"min-width: 1px; height: 0px;"></div></div><div class=3D=
" wiz-hide wiz_CodeMirror-hscrollbar" tabindex=3D"-1" cm-not-cont=
ent=3D"true" style=3D"height: 18px; pointer-events: none;"><div s=
tyle=3D"height: 100%; min-height: 1px; width: 0px;"></div></div><=
div class=3D"CodeMirror-scrollbar-filler" cm-not-content=3D"true"=
></div><div class=3D"CodeMirror-gutter-filler" cm-not-content=3D"=
true"></div><div class=3D"CodeMirror-scroll" tabindex=3D"-1" drag=
gable=3D"false"><div class=3D"CodeMirror-sizer" style=3D"margin-l=
eft: 30px; margin-bottom: 0px; border-right-width: 30px; min-heig=
ht: 416px; min-width: 691.8px; padding-right: 0px; padding-bottom=
: 0px;"><div style=3D"position: relative; top: 0px;"><div class=3D=
"CodeMirror-lines" role=3D"presentation"><div role=3D"presentatio=
n" style=3D"position: relative; outline: none;"><div class=3D"Cod=
eMirror-measure"><pre class=3D"CodeMirror-line-like">x</pre></div=
><div class=3D"CodeMirror-measure"></div><div style=3D"position:=20=
relative; z-index: 1;"></div><div class=3D" wiz-hide wiz_CodeMirr=
or-cursors" style=3D""><div class=3D"CodeMirror-cursor" style=3D"=
left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class=3D=
"CodeMirror-code" role=3D"presentation" style=3D""><div style=3D"=
position: relative;" class=3D"CodeMirror-activeline"><div class=3D=
" wiz-hide wiz_CodeMirror-activeline-background CodeMirror-lineba=
ckground"></div><div class=3D"CodeMirror-gutter-background CodeMi=
rror-activeline-gutter" style=3D"left: -30px; width: 30px;"></div=
><div class=3D"CodeMirror-gutter-wrapper CodeMirror-activeline-gu=
tter" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber=20=
CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">1</div><=
/div><pre class=3D"CodeMirror-line" role=3D"presentation"><span r=
ole=3D"presentation" style=3D"padding-right: 0.1px;"><span class=3D=
"cm-tab" role=3D"presentation" cm-text=3D"	">    </span><span cla=
ss=3D"cm-variable">private</span> <span class=3D"cm-variable">fin=
al</span> <span class=3D"cm-keyword">void</span> <span class=3D"c=
m-variable">realStartServiceLocked</span>(<span class=3D"cm-varia=
ble">ServiceRecord</span> <span class=3D"cm-variable">r</span>,</=
span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">2</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">            <span class=3D"cm-variable">ProcessRecord</=
span> <span class=3D"cm-variable">app</span>, <span class=3D"cm-v=
ariable">boolean</span> <span class=3D"cm-variable">execInFg</spa=
n>) <span class=3D"cm-variable">throws</span> <span class=3D"cm-v=
ariable">RemoteException</span> {</span></pre></div><div class=3D=
"" style=3D"position: relative;"><div class=3D"CodeMirror-gutter-=
wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumb=
er CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">3</di=
v></div><pre class=3D"CodeMirror-line" role=3D"presentation"><spa=
n role=3D"presentation" style=3D"padding-right: 0.1px;">        <=
span class=3D"cm-comment">// ANR =B5=C4=D4=AD=D2=F2=CA=C7=D3=C9=D3=
=DA=D5=E2=C0=EF=D3=D0=BC=E0=BF=D8</span></span></pre></div><div c=
lass=3D"" style=3D"position: relative;"><div class=3D"CodeMirror-=
gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-l=
inenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;=
">4</div></div><pre class=3D"CodeMirror-line" role=3D"presentatio=
n"><span role=3D"presentation" style=3D"padding-right: 0.1px;"> =20=
      <span class=3D"cm-variable">bumpServiceExecutingLocked</spa=
n>(<span class=3D"cm-variable">r</span>, <span class=3D"cm-variab=
le">execInFg</span>, <span class=3D"cm-string">"create"</span>);<=
/span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">5</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">        <span class=3D"cm-keyword">try</span> {</span><=
/pre></div><div class=3D"" style=3D"position: relative;"><div cla=
ss=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div clas=
s=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left:=20=
0px; width: 21px;">6</div></div><pre class=3D"CodeMirror-line" ro=
le=3D"presentation"><span role=3D"presentation" style=3D"padding-=
right: 0.1px;">            <span class=3D"cm-comment">// =C6=F4=B6=
=AF=D3=A6=D3=C3=B5=C4 Service=A3=ACthread -&gt; ActivityThread</s=
pan></span></pre></div><div style=3D"position: relative;" class=3D=
""><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;=
"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" styl=
e=3D"left: 0px; width: 21px;">7</div></div><pre class=3D"CodeMirr=
or-line" role=3D"presentation"><span role=3D"presentation" style=3D=
"padding-right: 0.1px;">            <span class=3D"cm-variable">a=
pp</span>.<span class=3D"cm-property">thread</span>.<span class=3D=
"cm-property">scheduleCreateService</span>(<span class=3D"cm-vari=
able">r</span>, <span class=3D"cm-variable">r</span>.<span class=3D=
"cm-property">serviceInfo</span>,</span></pre></div><div style=3D=
"position: relative;" class=3D""><div class=3D"CodeMirror-gutter-=
wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumb=
er CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">8</di=
v></div><pre class=3D"CodeMirror-line" role=3D"presentation"><spa=
n role=3D"presentation" style=3D"padding-right: 0.1px;">        =20=
           <span class=3D"cm-variable">mAm</span>.<span class=3D"=
cm-property">compatibilityInfoForPackageLocked</span>(<span class=
=3D"cm-variable">r</span>.<span class=3D"cm-property">serviceInfo=
</span>.<span class=3D"cm-property">applicationInfo</span>),</spa=
n></pre></div><div class=3D"" style=3D"position: relative;"><div=20=
class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div c=
lass=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"lef=
t: 0px; width: 21px;">9</div></div><pre class=3D"CodeMirror-line"=
 role=3D"presentation"><span role=3D"presentation" style=3D"paddi=
ng-right: 0.1px;">                    <span class=3D"cm-variable"=
>app</span>.<span class=3D"cm-property">repProcState</span>);</sp=
an></pre></div><div style=3D"position: relative;"><div class=3D"C=
odeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Co=
deMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; wi=
dth: 21px;">10</div></div><pre class=3D"CodeMirror-line" role=3D"=
presentation"><span role=3D"presentation" style=3D"padding-right:=
 0.1px;">        } <span class=3D"cm-keyword">catch</span> (<span=
 class=3D"cm-def">DeadObjectException</span> <span class=3D"cm-va=
riable">e</span>) {</span></pre></div><div style=3D"position: rel=
ative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -=
30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=
 style=3D"left: 0px; width: 21px;">11</div></div><pre class=3D"Co=
deMirror-line" role=3D"presentation"><span role=3D"presentation"=20=
style=3D"padding-right: 0.1px;">            <span class=3D"cm-var=
iable">Slog</span>.<span class=3D"cm-property">w</span>(<span cla=
ss=3D"cm-variable">TAG</span>, <span class=3D"cm-string">"Applica=
tion dead when creating service "</span> <span class=3D"cm-operat=
or">+</span> <span class=3D"cm-variable">r</span>);</span></pre><=
/div><div style=3D"position: relative;"><div class=3D"CodeMirror-=
gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-l=
inenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;=
">12</div></div><pre class=3D"CodeMirror-line" role=3D"presentati=
on"><span role=3D"presentation" style=3D"padding-right: 0.1px;">=20=
           <span class=3D"cm-variable">mAm</span>.<span class=3D"=
cm-property">appDiedLocked</span>(<span class=3D"cm-variable">app=
</span>);</span></pre></div><div style=3D"position: relative;"><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">13</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">            <span class=3D"cm-keyword">thro=
w</span> <span class=3D"cm-variable">e</span>;</span></pre></div>=
<div style=3D"position: relative;"><div class=3D"CodeMirror-gutte=
r-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenu=
mber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">14<=
/div></div><pre class=3D"CodeMirror-line" role=3D"presentation"><=
span role=3D"presentation" style=3D"padding-right: 0.1px;">     =20=
  } <span class=3D"cm-keyword">finally</span> {</span></pre></div=
><div class=3D"" style=3D"position: relative;"><div class=3D"Code=
Mirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeM=
irror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width=
: 21px;">15</div></div><pre class=3D"CodeMirror-line" role=3D"pre=
sentation"><span role=3D"presentation" style=3D"padding-right: 0.=
1px;">            <span class=3D"cm-meta">...</span></span></pre>=
</div><div class=3D"" style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">16</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">        }</span></pre></div><div class=3D"" style=3D"po=
sition: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=
=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-=
gutter-elt" style=3D"left: 0px; width: 21px;">17</div></div><pre=20=
class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"pre=
sentation" style=3D"padding-right: 0.1px;">    }</span></pre></di=
v></div></div></div></div></div><div style=3D"position: absolute;=
 height: 13px; width: 1px; border-bottom: 0px solid transparent;=20=
top: 416px;"></div><div class=3D"CodeMirror-gutters" style=3D"hei=
ght: 446px;"><div class=3D"CodeMirror-gutter CodeMirror-linenumbe=
rs" style=3D"width: 29px;"></div></div></div></div></wiz_code_mir=
ror></div><div id=3D"wiz_cm_1615728914591_9352" class=3D"wiz-code=
-container"  data-mode=3D"JavaScript" data-theme=3D"default"><tex=
tarea style=3D"display: none;">	private final void bumpServiceExe=
cutingLocked(ServiceRecord r, boolean fg, String why) {=0A      =20=
 if (r.executeNesting =3D=3D 0) {=0A           scheduleServiceTim=
eoutLocked(r.app);=0A        } else if (r.app !=3D null &amp;&amp=
; fg &amp;&amp; !r.app.execServicesFg) {=0A            scheduleSe=
rviceTimeoutLocked(r.app);=0A        }=0A      =0A    }=0A=0A=0A=09=
void scheduleServiceTimeoutLocked(ProcessRecord proc) {=0A      =20=
 // =CF=E0=B5=B1=D3=DA=C2=F1=C1=CB=D5=A8=B5=AF=A3=AC=C6=E4=CA=B5=BE=
=CD=CA=C7=CF=B5=CD=B3 Handler =B5=C4=D1=D3=CA=B1=CF=FB=CF=A2=0A =20=
      long now =3D SystemClock.uptimeMillis();=0A        Message=20=
msg =3D mAm.mHandler.obtainMessage(=0A                ActivityMan=
agerService.SERVICE_TIMEOUT_MSG);=0A        msg.obj =3D proc;=0A=20=
       // execServicesFg =C7=B0=CC=A8=B7=FE=CE=F1=A3=BF20s : 200s=
=0A        mAm.mHandler.sendMessageAtTime(msg,=0A               =20=
proc.execServicesFg ? (now+SERVICE_TIMEOUT) : (now+ SERVICE_BACKG=
ROUND_TIMEOUT));=0A    }=0A=0A	case SERVICE_TIMEOUT_MSG: {=0A   =20=
    mServices.serviceTimeout((ProcessRecord)msg.obj);=0A    } bre=
ak;=0A=0A	void serviceTimeout(ProcessRecord proc) {=0A        if=20=
(anrMessage !=3D null) {=0A            // =D5=E2=C0=EF=BE=CD=BB=E1=
=B5=AF=B3=F6=CF=B5=CD=B3=B5=C4 ANR =B5=C4=BF=F2=0A            mAm=
.appNotResponding(proc, null, null, false, anrMessage);=0A      =20=
 }=0A    }</textarea><wiz_code_mirror><div class=3D"CodeMirror cm=
-s-default" data-id=3D"wiz_cm_1615728914591_9352"><div style=3D"o=
verflow: hidden; position: relative; width: 3px; height: 0px; top=
: 20px; left: 34px;"><textarea autocorrect=3D"off" autocapitalize=
=3D"off" spellcheck=3D"false" tabindex=3D"0" style=3D"position: a=
bsolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em;=20=
outline: none;"></textarea></div><div class=3D" wiz-hide wiz_Code=
Mirror-vscrollbar" tabindex=3D"-1" cm-not-content=3D"true" style=3D=
"width: 18px; pointer-events: none;"><div style=3D"min-width: 1px=
; height: 0px;"></div></div><div class=3D" wiz-hide wiz_CodeMirro=
r-hscrollbar" tabindex=3D"-1" cm-not-content=3D"true" style=3D"he=
ight: 18px; pointer-events: none;"><div style=3D"height: 100%; mi=
n-height: 1px; width: 0px;"></div></div><div class=3D"CodeMirror-=
scrollbar-filler" cm-not-content=3D"true"></div><div class=3D"Cod=
eMirror-gutter-filler" cm-not-content=3D"true"></div><div class=3D=
"CodeMirror-scroll" tabindex=3D"-1" draggable=3D"false"><div clas=
s=3D"CodeMirror-sizer" style=3D"margin-left: 30px; margin-bottom:=
 0px; border-right-width: 30px; min-height: 752px; min-width: 753=
.4px; padding-right: 0px; padding-bottom: 0px;"><div style=3D"pos=
ition: relative; top: 0px;"><div class=3D"CodeMirror-lines" role=3D=
"presentation"><div role=3D"presentation" style=3D"position: rela=
tive; outline: none;"><div class=3D"CodeMirror-measure"><pre clas=
s=3D"CodeMirror-line-like">x</pre><div class=3D"CodeMirror-linenu=
mber CodeMirror-gutter-elt"><div>9</div></div><div class=3D"CodeM=
irror-linenumber CodeMirror-gutter-elt"><div>10</div></div></div>=
<div class=3D"CodeMirror-measure"></div><div style=3D"position: r=
elative; z-index: 1;"></div><div class=3D" wiz-hide wiz_CodeMirro=
r-cursors" style=3D"visibility: hidden;"><div class=3D"CodeMirror=
-cursor" style=3D"left: 4px; top: 0px; height: 24px;">&nbsp;</div=
></div><div class=3D"CodeMirror-code" role=3D"presentation" style=
=3D""><div style=3D"position: relative;" class=3D"CodeMirror-acti=
veline"><div class=3D" wiz-hide wiz_CodeMirror-activeline-backgro=
und CodeMirror-linebackground"></div><div class=3D"CodeMirror-gut=
ter-background CodeMirror-activeline-gutter" style=3D"left: -30px=
; width: 30px;"></div><div class=3D"CodeMirror-gutter-wrapper Cod=
eMirror-activeline-gutter" style=3D"left: -30px;"><div class=3D"C=
odeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; w=
idth: 21px;">1</div></div><pre class=3D"CodeMirror-line" role=3D"=
presentation"><span role=3D"presentation" style=3D"padding-right:=
 0.1px;"><span class=3D"cm-tab" role=3D"presentation" cm-text=3D"=
	">    </span><span class=3D"cm-variable">private</span> <span cl=
ass=3D"cm-variable">final</span> <span class=3D"cm-keyword">void<=
/span> <span class=3D"cm-variable">bumpServiceExecutingLocked</sp=
an>(<span class=3D"cm-variable">ServiceRecord</span> <span class=3D=
"cm-variable">r</span>, <span class=3D"cm-variable">boolean</span=
> <span class=3D"cm-variable">fg</span>, <span class=3D"cm-variab=
le">String</span> <span class=3D"cm-variable">why</span>) {</span=
></pre></div><div style=3D"position: relative;"><div class=3D"Cod=
eMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Code=
Mirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; widt=
h: 21px;">2</div></div><pre class=3D"CodeMirror-line" role=3D"pre=
sentation"><span role=3D"presentation" style=3D"padding-right: 0.=
1px;">        <span class=3D"cm-keyword">if</span> (<span class=3D=
"cm-variable">r</span>.<span class=3D"cm-property">executeNesting=
</span> <span class=3D"cm-operator">=3D=3D</span> <span class=3D"=
cm-number">0</span>) {</span></pre></div><div style=3D"position:=20=
relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left=
: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-e=
lt" style=3D"left: 0px; width: 21px;">3</div></div><pre class=3D"=
CodeMirror-line" role=3D"presentation"><span role=3D"presentation=
" style=3D"padding-right: 0.1px;">           <span class=3D"cm-va=
riable">scheduleServiceTimeoutLocked</span>(<span class=3D"cm-var=
iable">r</span>.<span class=3D"cm-property">app</span>);</span></=
pre></div><div style=3D"position: relative;"><div class=3D"CodeMi=
rror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMir=
ror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width:=20=
21px;">4</div></div><pre class=3D"CodeMirror-line" role=3D"presen=
tation"><span role=3D"presentation" style=3D"padding-right: 0.1px=
;">        } <span class=3D"cm-keyword">else</span> <span class=3D=
"cm-keyword">if</span> (<span class=3D"cm-variable">r</span>.<spa=
n class=3D"cm-property">app</span> <span class=3D"cm-operator">!=3D=
</span> <span class=3D"cm-atom">null</span> <span class=3D"cm-ope=
rator">&amp;&amp;</span> <span class=3D"cm-variable">fg</span> <s=
pan class=3D"cm-operator">&amp;&amp;</span> <span class=3D"cm-ope=
rator">!</span><span class=3D"cm-variable">r</span>.<span class=3D=
"cm-property">app</span>.<span class=3D"cm-property">execServices=
Fg</span>) {</span></pre></div><div style=3D"position: relative;"=
><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;">=
<div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D=
"left: 0px; width: 21px;">5</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">            <span class=3D"cm-variable">sch=
eduleServiceTimeoutLocked</span>(<span class=3D"cm-variable">r</s=
pan>.<span class=3D"cm-property">app</span>);</span></pre></div><=
div style=3D"position: relative;"><div class=3D"CodeMirror-gutter=
-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenum=
ber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">6</d=
iv></div><pre class=3D"CodeMirror-line" role=3D"presentation"><sp=
an role=3D"presentation" style=3D"padding-right: 0.1px;">       =20=
}</span></pre></div><div style=3D"position: relative;"><div class=
=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D=
"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=
 width: 21px;">7</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">      </span></pre></div><div style=3D"position: relati=
ve;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30p=
x;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" st=
yle=3D"left: 0px; width: 21px;">8</div></div><pre class=3D"CodeMi=
rror-line" role=3D"presentation"><span role=3D"presentation" styl=
e=3D"padding-right: 0.1px;">    }</span></pre></div><div style=3D=
"position: relative;"><div class=3D"CodeMirror-gutter-wrapper" st=
yle=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirr=
or-gutter-elt" style=3D"left: 0px; width: 21px;">9</div></div><pr=
e class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"p=
resentation" style=3D"padding-right:0.1px"></span></pre></div><di=
v style=3D"position: relative;"><div class=3D"CodeMirror-gutter-w=
rapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumbe=
r CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">10</di=
v></div><pre class=3D"CodeMirror-line" role=3D"presentation"><spa=
n role=3D"presentation" style=3D"padding-right:0.1px"></span></pr=
e></div><div class=3D"" style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">11</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;"><span class=3D"cm-tab" role=3D"presentation" cm-text=3D=
"	">    </span><span class=3D"cm-keyword">void</span> <span class=
=3D"cm-variable">scheduleServiceTimeoutLocked</span>(<span class=3D=
"cm-variable">ProcessRecord</span> <span class=3D"cm-variable">pr=
oc</span>) {</span></pre></div><div class=3D"" style=3D"position:=
 relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"lef=
t: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-=
elt" style=3D"left: 0px; width: 21px;">12</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right: 0.1px;">        <span class=3D"cm-comm=
ent">// =CF=E0=B5=B1=D3=DA=C2=F1=C1=CB=D5=A8=B5=AF=A3=AC=C6=E4=CA=
=B5=BE=CD=CA=C7=CF=B5=CD=B3 Handler =B5=C4=D1=D3=CA=B1=CF=FB=CF=A2=
</span></span></pre></div><div style=3D"position: relative;"><div=
 class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div=20=
class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"le=
ft: 0px; width: 21px;">13</div></div><pre class=3D"CodeMirror-lin=
e" role=3D"presentation"><span role=3D"presentation" style=3D"pad=
ding-right: 0.1px;">        <span class=3D"cm-variable">long</spa=
n> <span class=3D"cm-variable">now</span> <span class=3D"cm-opera=
tor">=3D</span> <span class=3D"cm-variable">SystemClock</span>.<s=
pan class=3D"cm-property">uptimeMillis</span>();</span></pre></di=
v><div style=3D"position: relative;" class=3D""><div class=3D"Cod=
eMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Code=
Mirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; widt=
h: 21px;">14</div></div><pre class=3D"CodeMirror-line" role=3D"pr=
esentation"><span role=3D"presentation" style=3D"padding-right: 0=
.1px;">        <span class=3D"cm-variable">Message</span> <span c=
lass=3D"cm-variable">msg</span> <span class=3D"cm-operator">=3D</=
span> <span class=3D"cm-variable">mAm</span>.<span class=3D"cm-pr=
operty">mHandler</span>.<span class=3D"cm-property">obtainMessage=
</span>(</span></pre></div><div style=3D"position: relative;"><di=
v class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div=
 class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"l=
eft: 0px; width: 21px;">15</div></div><pre class=3D"CodeMirror-li=
ne" role=3D"presentation"><span role=3D"presentation" style=3D"pa=
dding-right: 0.1px;">                <span class=3D"cm-variable">=
ActivityManagerService</span>.<span class=3D"cm-property">SERVICE=
_TIMEOUT_MSG</span>);</span></pre></div><div style=3D"position: r=
elative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left:=
 -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-el=
t" style=3D"left: 0px; width: 21px;">16</div></div><pre class=3D"=
CodeMirror-line" role=3D"presentation"><span role=3D"presentation=
" style=3D"padding-right: 0.1px;">        <span class=3D"cm-varia=
ble">msg</span>.<span class=3D"cm-property">obj</span> <span clas=
s=3D"cm-operator">=3D</span> <span class=3D"cm-variable">proc</sp=
an>;</span></pre></div><div class=3D"" style=3D"position: relativ=
e;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px=
;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" sty=
le=3D"left: 0px; width: 21px;">17</div></div><pre class=3D"CodeMi=
rror-line" role=3D"presentation"><span role=3D"presentation" styl=
e=3D"padding-right: 0.1px;">        <span class=3D"cm-comment">//=
 execServicesFg =C7=B0=CC=A8=B7=FE=CE=F1=A3=BF20s : 200s</span></=
span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">18</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">        <span class=3D"cm-variable">mAm</span>.<span cl=
ass=3D"cm-property">mHandler</span>.<span class=3D"cm-property">s=
endMessageAtTime</span>(<span class=3D"cm-variable">msg</span>,</=
span></pre></div><div style=3D"position: relative;" class=3D""><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">19</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">                <span class=3D"cm-variable"=
>proc</span>.<span class=3D"cm-property">execServicesFg</span> <s=
pan class=3D"cm-operator">?</span> (<span class=3D"cm-variable">n=
ow</span><span class=3D"cm-operator">+</span><span class=3D"cm-va=
riable">SERVICE_TIMEOUT</span>) : (<span class=3D"cm-variable">no=
w</span><span class=3D"cm-operator">+</span> <span class=3D"cm-va=
riable">SERVICE_BACKGROUND_TIMEOUT</span>));</span></pre></div><d=
iv style=3D"position: relative;"><div class=3D"CodeMirror-gutter-=
wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumb=
er CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">20</d=
iv></div><pre class=3D"CodeMirror-line" role=3D"presentation"><sp=
an role=3D"presentation" style=3D"padding-right: 0.1px;">    }</s=
pan></pre></div><div style=3D"position: relative;"><div class=3D"=
CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"C=
odeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; w=
idth: 21px;">21</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
:0.1px"></span></pre></div><div class=3D"" style=3D"position: rel=
ative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -=
30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=
 style=3D"left: 0px; width: 21px;">22</div></div><pre class=3D"Co=
deMirror-line" role=3D"presentation"><span role=3D"presentation"=20=
style=3D"padding-right: 0.1px;"><span class=3D"cm-tab" role=3D"pr=
esentation" cm-text=3D"	">    </span><span class=3D"cm-keyword">c=
ase</span> <span class=3D"cm-variable">SERVICE_TIMEOUT_MSG</span>=
: {</span></pre></div><div class=3D"" style=3D"position: relative=
;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;=
"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" styl=
e=3D"left: 0px; width: 21px;">23</div></div><pre class=3D"CodeMir=
ror-line" role=3D"presentation"><span role=3D"presentation" style=
=3D"padding-right: 0.1px;">        <span class=3D"cm-variable">mS=
ervices</span>.<span class=3D"cm-property">serviceTimeout</span>(=
(<span class=3D"cm-variable">ProcessRecord</span>)<span class=3D"=
cm-variable">msg</span>.<span class=3D"cm-variable">obj</span>);<=
/span></pre></div><div class=3D"" style=3D"position: relative;"><=
div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><d=
iv class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D=
"left: 0px; width: 21px;">24</div></div><pre class=3D"CodeMirror-=
line" role=3D"presentation"><span role=3D"presentation" style=3D"=
padding-right: 0.1px;">    } <span class=3D"cm-keyword">break</sp=
an>;</span></pre></div><div style=3D"position: relative;"><div cl=
ass=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div cla=
ss=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left:=
 0px; width: 21px;">25</div></div><pre class=3D"CodeMirror-line"=20=
role=3D"presentation"><span role=3D"presentation" style=3D"paddin=
g-right:0.1px"></span></pre></div><div class=3D"" style=3D"positi=
on: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"=
left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutt=
er-elt" style=3D"left: 0px; width: 21px;">26</div></div><pre clas=
s=3D"CodeMirror-line" role=3D"presentation"><span role=3D"present=
ation" style=3D"padding-right: 0.1px;"><span class=3D"cm-tab" rol=
e=3D"presentation" cm-text=3D"	">    </span><span class=3D"cm-key=
word">void</span> <span class=3D"cm-variable">serviceTimeout</spa=
n>(<span class=3D"cm-variable">ProcessRecord</span> <span class=3D=
"cm-variable">proc</span>) {</span></pre></div><div style=3D"posi=
tion: relative;" class=3D""><div class=3D"CodeMirror-gutter-wrapp=
er" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Co=
deMirror-gutter-elt" style=3D"left: 0px; width: 21px;">27</div></=
div><pre class=3D"CodeMirror-line" role=3D"presentation"><span ro=
le=3D"presentation" style=3D"padding-right: 0.1px;">        <span=
 class=3D"cm-keyword">if</span> (<span class=3D"cm-variable">anrM=
essage</span> <span class=3D"cm-operator">!=3D</span> <span class=
=3D"cm-atom">null</span>) {</span></pre></div><div class=3D"" sty=
le=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrappe=
r" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Cod=
eMirror-gutter-elt" style=3D"left: 0px; width: 21px;">28</div></d=
iv><pre class=3D"CodeMirror-line" role=3D"presentation"><span rol=
e=3D"presentation" style=3D"padding-right: 0.1px;">            <s=
pan class=3D"cm-comment">// =D5=E2=C0=EF=BE=CD=BB=E1=B5=AF=B3=F6=CF=
=B5=CD=B3=B5=C4 ANR =B5=C4=BF=F2</span></span></pre></div><div st=
yle=3D"position: relative;" class=3D""><div class=3D"CodeMirror-g=
utter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-li=
nenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;"=
>29</div></div><pre class=3D"CodeMirror-line" role=3D"presentatio=
n"><span role=3D"presentation" style=3D"padding-right: 0.1px;"> =20=
          <span class=3D"cm-variable">mAm</span>.<span class=3D"c=
m-property">appNotResponding</span>(<span class=3D"cm-variable">p=
roc</span>, <span class=3D"cm-atom">null</span>, <span class=3D"c=
m-atom">null</span>, <span class=3D"cm-atom">false</span>, <span=20=
class=3D"cm-variable">anrMessage</span>);</span></pre></div><div=20=
style=3D"position: relative;" class=3D""><div class=3D"CodeMirror=
-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-=
linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px=
;">30</div></div><pre class=3D"CodeMirror-line" role=3D"presentat=
ion"><span role=3D"presentation" style=3D"padding-right: 0.1px;">=
        }</span></pre></div><div class=3D"" style=3D"position: re=
lative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left:=20=
-30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt=
" style=3D"left: 0px; width: 21px;">31</div></div><pre class=3D"C=
odeMirror-line" role=3D"presentation"><span role=3D"presentation"=
 style=3D"padding-right: 0.1px;">    }</span></pre></div></div></=
div></div></div></div><div style=3D"position: absolute; height: 1=
3px; width: 1px; border-bottom: 0px solid transparent; top: 752px=
;"></div><div class=3D"CodeMirror-gutters" style=3D"height: 782px=
;"><div class=3D"CodeMirror-gutter CodeMirror-linenumbers" style=3D=
"width: 29px;"></div></div></div></div></wiz_code_mirror></div><d=
iv id=3D"wiz_cm_1615729270710_370" class=3D"wiz-code-container" =20=
data-mode=3D"JavaScript" data-theme=3D"default"><textarea style=3D=
"display: none;">private void handleCreateService(CreateServiceDa=
ta data) {=0A        Service service =3D null;=0A        try {=0A=
            java.lang.ClassLoader cl =3D packageInfo.getClassLoad=
er();=0A            service =3D (Service) cl.loadClass(data.info.=
name).newInstance();=0A        } catch (Exception e) {=0A       =20=
    if (!mInstrumentation.onException(service, e)) {=0A         =20=
      throw new RuntimeException(=0A                    "Unable t=
o instantiate service " + data.info.name=0A                    +=20=
": " + e.toString(), e);=0A            }=0A        }=0A=0A      =20=
 try {=0A            service.onCreate();=0A            try {=0A =20=
              ActivityManagerNative.getDefault().serviceDoneExecu=
ting(=0A                        data.token, SERVICE_DONE_EXECUTIN=
G_ANON, 0, 0);=0A            } catch (RemoteException e) {=0A   =20=
            // nothing to do.=0A            }=0A        } catch (=
Exception e) {=0A        }=0A    }</textarea><wiz_code_mirror><di=
v class=3D"CodeMirror cm-s-default" data-id=3D"wiz_cm_16157292707=
10_370"><div style=3D"overflow: hidden; position: relative; width=
: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect=
=3D"off" autocapitalize=3D"off" spellcheck=3D"false" tabindex=3D"=
0" style=3D"position: absolute; bottom: -1em; padding: 0px; width=
: 1000px; height: 1em; outline: none;"></textarea></div><div clas=
s=3D" wiz-hide wiz_CodeMirror-vscrollbar" tabindex=3D"-1" cm-not-=
content=3D"true" style=3D"width: 18px; pointer-events: none;"><di=
v style=3D"min-width: 1px; height: 0px;"></div></div><div class=3D=
" wiz-hide wiz_CodeMirror-hscrollbar" tabindex=3D"-1" cm-not-cont=
ent=3D"true" style=3D"height: 18px; pointer-events: none;"><div s=
tyle=3D"height: 100%; min-height: 1px; width: 0px;"></div></div><=
div class=3D"CodeMirror-scrollbar-filler" cm-not-content=3D"true"=
></div><div class=3D"CodeMirror-gutter-filler" cm-not-content=3D"=
true"></div><div class=3D"CodeMirror-scroll" tabindex=3D"-1"><div=
 class=3D"CodeMirror-sizer" style=3D"margin-left: 30px; margin-bo=
ttom: 0px; border-right-width: 30px; min-height: 584px; min-width=
: 583.8px; padding-right: 0px; padding-bottom: 0px;"><div style=3D=
"position: relative; top: 0px;"><div class=3D"CodeMirror-lines" r=
ole=3D"presentation"><div role=3D"presentation" style=3D"position=
: relative; outline: none;"><div class=3D"CodeMirror-measure"><pr=
e class=3D"CodeMirror-line-like">x</pre></div><div class=3D"CodeM=
irror-measure"></div><div style=3D"position: relative; z-index: 1=
;"></div><div class=3D" wiz-hide wiz_CodeMirror-cursors" style=3D=
""><div class=3D"CodeMirror-cursor" style=3D"left: 4px; top: 0px;=
 height: 24px;">&nbsp;</div></div><div class=3D"CodeMirror-code"=20=
role=3D"presentation" style=3D""><div class=3D"CodeMirror-activel=
ine" style=3D"position: relative;"><div class=3D" wiz-hide wiz_Co=
deMirror-activeline-background CodeMirror-linebackground"></div><=
div class=3D"CodeMirror-gutter-background CodeMirror-activeline-g=
utter" style=3D"left: -30px; width: 30px;"></div><div class=3D"Co=
deMirror-gutter-wrapper CodeMirror-activeline-gutter" style=3D"le=
ft: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter=
-elt" style=3D"left: 0px; width: 21px;">1</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right: 0.1px;"><span class=3D"cm-variable">pr=
ivate</span> <span class=3D"cm-keyword">void</span> <span class=3D=
"cm-variable">handleCreateService</span>(<span class=3D"cm-variab=
le">CreateServiceData</span> <span class=3D"cm-variable">data</sp=
an>) {</span></pre></div><div class=3D"" style=3D"position: relat=
ive;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30=
px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" s=
tyle=3D"left: 0px; width: 21px;">2</div></div><pre class=3D"CodeM=
irror-line" role=3D"presentation"><span role=3D"presentation" sty=
le=3D"padding-right: 0.1px;">        <span class=3D"cm-variable">=
Service</span> <span class=3D"cm-variable">service</span> <span c=
lass=3D"cm-operator">=3D</span> <span class=3D"cm-atom">null</spa=
n>;</span></pre></div><div style=3D"position: relative;"><div cla=
ss=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div clas=
s=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left:=20=
0px; width: 21px;">3</div></div><pre class=3D"CodeMirror-line" ro=
le=3D"presentation"><span role=3D"presentation" style=3D"padding-=
right: 0.1px;">        <span class=3D"cm-keyword">try</span> {</s=
pan></pre></div><div style=3D"position: relative;"><div class=3D"=
CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"C=
odeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; w=
idth: 21px;">4</div></div><pre class=3D"CodeMirror-line" role=3D"=
presentation"><span role=3D"presentation" style=3D"padding-right:=
 0.1px;">            <span class=3D"cm-variable">java</span>.<spa=
n class=3D"cm-property">lang</span>.<span class=3D"cm-property">C=
lassLoader</span> <span class=3D"cm-variable">cl</span> <span cla=
ss=3D"cm-operator">=3D</span> <span class=3D"cm-variable">package=
Info</span>.<span class=3D"cm-property">getClassLoader</span>();<=
/span></pre></div><div class=3D"" style=3D"position: relative;"><=
div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><d=
iv class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D=
"left: 0px; width: 21px;">5</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">            <span class=3D"cm-variable">ser=
vice</span> <span class=3D"cm-operator">=3D</span> (<span class=3D=
"cm-variable">Service</span>) <span class=3D"cm-variable">cl</spa=
n>.<span class=3D"cm-property">loadClass</span>(<span class=3D"cm=
-variable">data</span>.<span class=3D"cm-property">info</span>.<s=
pan class=3D"cm-property">name</span>).<span class=3D"cm-property=
">newInstance</span>();</span></pre></div><div style=3D"position:=
 relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"lef=
t: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-=
elt" style=3D"left: 0px; width: 21px;">6</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right: 0.1px;">        } <span class=3D"cm-ke=
yword">catch</span> (<span class=3D"cm-def">Exception</span> <spa=
n class=3D"cm-variable">e</span>) {</span></pre></div><div style=3D=
"position: relative;"><div class=3D"CodeMirror-gutter-wrapper" st=
yle=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirr=
or-gutter-elt" style=3D"left: 0px; width: 21px;">7</div></div><pr=
e class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"p=
resentation" style=3D"padding-right: 0.1px;">            <span cl=
ass=3D"cm-keyword">if</span> (<span class=3D"cm-operator">!</span=
><span class=3D"cm-variable">mInstrumentation</span>.<span class=3D=
"cm-property">onException</span>(<span class=3D"cm-variable">serv=
ice</span>, <span class=3D"cm-variable">e</span>)) {</span></pre>=
</div><div style=3D"position: relative;"><div class=3D"CodeMirror=
-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-=
linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px=
;">8</div></div><pre class=3D"CodeMirror-line" role=3D"presentati=
on"><span role=3D"presentation" style=3D"padding-right: 0.1px;">=20=
               <span class=3D"cm-keyword">throw</span> <span clas=
s=3D"cm-keyword">new</span> <span class=3D"cm-variable">RuntimeEx=
ception</span>(</span></pre></div><div style=3D"position: relativ=
e;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px=
;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" sty=
le=3D"left: 0px; width: 21px;">9</div></div><pre class=3D"CodeMir=
ror-line" role=3D"presentation"><span role=3D"presentation" style=
=3D"padding-right: 0.1px;">                    <span class=3D"cm-=
string">"Unable to instantiate service "</span> <span class=3D"cm=
-operator">+</span> <span class=3D"cm-variable">data</span>.<span=
 class=3D"cm-property">info</span>.<span class=3D"cm-property">na=
me</span></span></pre></div><div style=3D"position: relative;"><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">10</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">                    <span class=3D"cm-opera=
tor">+</span> <span class=3D"cm-string">": "</span> <span class=3D=
"cm-operator">+</span> <span class=3D"cm-variable">e</span>.<span=
 class=3D"cm-property">toString</span>(), <span class=3D"cm-varia=
ble">e</span>);</span></pre></div><div style=3D"position: relativ=
e;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px=
;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" sty=
le=3D"left: 0px; width: 21px;">11</div></div><pre class=3D"CodeMi=
rror-line" role=3D"presentation"><span role=3D"presentation" styl=
e=3D"padding-right: 0.1px;">            }</span></pre></div><div=20=
style=3D"position: relative;"><div class=3D"CodeMirror-gutter-wra=
pper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber=20=
CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">12</div>=
</div><pre class=3D"CodeMirror-line" role=3D"presentation"><span=20=
role=3D"presentation" style=3D"padding-right: 0.1px;">        }</=
span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">13</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
:0.1px"></span></pre></div><div class=3D"" style=3D"position: rel=
ative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -=
30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=
 style=3D"left: 0px; width: 21px;">14</div></div><pre class=3D"Co=
deMirror-line" role=3D"presentation"><span role=3D"presentation"=20=
style=3D"padding-right: 0.1px;">        <span class=3D"cm-keyword=
">try</span> {</span></pre></div><div class=3D"" style=3D"positio=
n: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"l=
eft: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutte=
r-elt" style=3D"left: 0px; width: 21px;">15</div></div><pre class=
=3D"CodeMirror-line" role=3D"presentation"><span role=3D"presenta=
tion" style=3D"padding-right: 0.1px;">            <span class=3D"=
cm-variable">service</span>.<span class=3D"cm-property">onCreate<=
/span>();</span></pre></div><div style=3D"position: relative;"><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">16</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">            <span class=3D"cm-keyword">try<=
/span> {</span></pre></div><div class=3D"" style=3D"position: rel=
ative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -=
30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=
 style=3D"left: 0px; width: 21px;">17</div></div><pre class=3D"Co=
deMirror-line" role=3D"presentation"><span role=3D"presentation"=20=
style=3D"padding-right: 0.1px;">                <span class=3D"cm=
-variable">ActivityManagerNative</span>.<span class=3D"cm-propert=
y">getDefault</span>().<span class=3D"cm-property">serviceDoneExe=
cuting</span>(</span></pre></div><div style=3D"position: relative=
;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;=
"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" styl=
e=3D"left: 0px; width: 21px;">18</div></div><pre class=3D"CodeMir=
ror-line" role=3D"presentation"><span role=3D"presentation" style=
=3D"padding-right: 0.1px;">                        <span class=3D=
"cm-variable">data</span>.<span class=3D"cm-property">token</span=
>, <span class=3D"cm-variable">SERVICE_DONE_EXECUTING_ANON</span>=
, <span class=3D"cm-number">0</span>, <span class=3D"cm-number">0=
</span>);</span></pre></div><div style=3D"position: relative;"><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">19</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">            } <span class=3D"cm-keyword">ca=
tch</span> (<span class=3D"cm-def">RemoteException</span> <span c=
lass=3D"cm-variable">e</span>) {</span></pre></div><div style=3D"=
position: relative;"><div class=3D"CodeMirror-gutter-wrapper" sty=
le=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirro=
r-gutter-elt" style=3D"left: 0px; width: 21px;">20</div></div><pr=
e class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"p=
resentation" style=3D"padding-right: 0.1px;">                <spa=
n class=3D"cm-comment">// nothing to do.</span></span></pre></div=
><div style=3D"position: relative;"><div class=3D"CodeMirror-gutt=
er-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linen=
umber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">21=
</div></div><pre class=3D"CodeMirror-line" role=3D"presentation">=
<span role=3D"presentation" style=3D"padding-right: 0.1px;">    =20=
       }</span></pre></div><div class=3D"" style=3D"position: rel=
ative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -=
30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=
 style=3D"left: 0px; width: 21px;">22</div></div><pre class=3D"Co=
deMirror-line" role=3D"presentation"><span role=3D"presentation"=20=
style=3D"padding-right: 0.1px;">        } <span class=3D"cm-keywo=
rd">catch</span> (<span class=3D"cm-def">Exception</span> <span c=
lass=3D"cm-variable">e</span>) {</span></pre></div><div style=3D"=
position: relative;"><div class=3D"CodeMirror-gutter-wrapper" sty=
le=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirro=
r-gutter-elt" style=3D"left: 0px; width: 21px;">23</div></div><pr=
e class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"p=
resentation" style=3D"padding-right: 0.1px;">        }</span></pr=
e></div><div class=3D"" style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">24</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">    }</span></pre></div></div></div></div></div></div><=
div style=3D"position: absolute; height: 13px; width: 1px; border=
-bottom: 0px solid transparent; top: 584px;"></div><div class=3D"=
CodeMirror-gutters" style=3D"height: 614px;"><div class=3D"CodeMi=
rror-gutter CodeMirror-linenumbers" style=3D"width: 29px;"></div>=
</div></div></div></wiz_code_mirror></div><div id=3D"wiz_cm_16157=
29338145_4942" class=3D"wiz-code-container"  data-mode=3D"JavaScr=
ipt" data-theme=3D"default"><textarea style=3D"display: none;">	p=
ublic void serviceDoneExecuting(IBinder token, int type, int star=
tId, int res) {=0A        synchronized(this) {=0A            mSer=
vices.serviceDoneExecutingLocked((ServiceRecord)token, type, star=
tId, res);=0A        }=0A    }</textarea><wiz_code_mirror><div cl=
ass=3D"CodeMirror cm-s-default" data-id=3D"wiz_cm_1615729338145_4=
942"><div style=3D"overflow: hidden; position: relative; width: 3=
px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect=3D=
"off" autocapitalize=3D"off" spellcheck=3D"false" tabindex=3D"0"=20=
style=3D"position: absolute; bottom: -1em; padding: 0px; width: 1=
000px; height: 1em; outline: none;"></textarea></div><div class=3D=
" wiz-hide wiz_CodeMirror-vscrollbar" tabindex=3D"-1" cm-not-cont=
ent=3D"true" style=3D"width: 18px; pointer-events: none;"><div st=
yle=3D"min-width: 1px; height: 0px;"></div></div><div class=3D" w=
iz-hide wiz_CodeMirror-hscrollbar" tabindex=3D"-1" cm-not-content=
=3D"true" style=3D"height: 18px; pointer-events: none;"><div styl=
e=3D"height: 100%; min-height: 1px; width: 0px;"></div></div><div=
 class=3D"CodeMirror-scrollbar-filler" cm-not-content=3D"true"></=
div><div class=3D"CodeMirror-gutter-filler" cm-not-content=3D"tru=
e"></div><div class=3D"CodeMirror-scroll" tabindex=3D"-1"><div cl=
ass=3D"CodeMirror-sizer" style=3D"margin-left: 30px; margin-botto=
m: 0px; border-right-width: 30px; min-height: 128px; min-width: 7=
07px; padding-right: 0px; padding-bottom: 0px;"><div style=3D"pos=
ition: relative; top: 0px;"><div class=3D"CodeMirror-lines" role=3D=
"presentation"><div role=3D"presentation" style=3D"position: rela=
tive; outline: none;"><div class=3D"CodeMirror-measure"><pre clas=
s=3D"CodeMirror-line-like">x</pre></div><div class=3D"CodeMirror-=
measure"></div><div style=3D"position: relative; z-index: 1;"></d=
iv><div class=3D" wiz-hide wiz_CodeMirror-cursors" style=3D"visib=
ility: hidden;"><div class=3D"CodeMirror-cursor" style=3D"left: 4=
px; top: 0px; height: 24px;">&nbsp;</div></div><div class=3D"Code=
Mirror-code" role=3D"presentation" style=3D""><div class=3D"CodeM=
irror-activeline" style=3D"position: relative;"><div class=3D" wi=
z-hide wiz_CodeMirror-activeline-background CodeMirror-linebackgr=
ound"></div><div class=3D"CodeMirror-gutter-background CodeMirror=
-activeline-gutter" style=3D"left: -30px; width: 30px;"></div><di=
v class=3D"CodeMirror-gutter-wrapper CodeMirror-activeline-gutter=
" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Code=
Mirror-gutter-elt" style=3D"left: 0px; width: 21px;">1</div></div=
><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=3D=
"presentation" style=3D"padding-right: 0.1px;"><span class=3D"cm-=
tab" role=3D"presentation" cm-text=3D"	">    </span><span class=3D=
"cm-variable">public</span> <span class=3D"cm-keyword">void</span=
> <span class=3D"cm-variable">serviceDoneExecuting</span>(<span c=
lass=3D"cm-variable">IBinder</span> <span class=3D"cm-variable">t=
oken</span>, <span class=3D"cm-variable">int</span> <span class=3D=
"cm-variable">type</span>, <span class=3D"cm-variable">int</span>=
 <span class=3D"cm-variable">startId</span>, <span class=3D"cm-va=
riable">int</span> <span class=3D"cm-variable">res</span>) {</spa=
n></pre></div><div class=3D"" style=3D"position: relative;"><div=20=
class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div c=
lass=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"lef=
t: 0px; width: 21px;">2</div></div><pre class=3D"CodeMirror-line"=
 role=3D"presentation"><span role=3D"presentation" style=3D"paddi=
ng-right: 0.1px;">        <span class=3D"cm-variable">synchronize=
d</span>(<span class=3D"cm-keyword">this</span>) {</span></pre></=
div><div style=3D"position: relative;"><div class=3D"CodeMirror-g=
utter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-li=
nenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;"=
>3</div></div><pre class=3D"CodeMirror-line" role=3D"presentation=
"><span role=3D"presentation" style=3D"padding-right: 0.1px;">  =20=
         <span class=3D"cm-variable">mServices</span>.<span class=
=3D"cm-property">serviceDoneExecutingLocked</span>((<span class=3D=
"cm-variable">ServiceRecord</span>)<span class=3D"cm-variable">to=
ken</span>, <span class=3D"cm-variable">type</span>, <span class=3D=
"cm-variable">startId</span>, <span class=3D"cm-variable">res</sp=
an>);</span></pre></div><div style=3D"position: relative;"><div c=
lass=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div cl=
ass=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left=
: 0px; width: 21px;">4</div></div><pre class=3D"CodeMirror-line"=20=
role=3D"presentation"><span role=3D"presentation" style=3D"paddin=
g-right: 0.1px;">        }</span></pre></div><div class=3D"" styl=
e=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapper=
" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Code=
Mirror-gutter-elt" style=3D"left: 0px; width: 21px;">5</div></div=
><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=3D=
"presentation" style=3D"padding-right: 0.1px;">    }</span></pre>=
</div></div></div></div></div></div><div style=3D"position: absol=
ute; height: 13px; width: 1px; border-bottom: 0px solid transpare=
nt; top: 128px;"></div><div class=3D"CodeMirror-gutters" style=3D=
"height: 158px;"><div class=3D"CodeMirror-gutter CodeMirror-linen=
umbers" style=3D"width: 29px;"></div></div></div></div></wiz_code=
_mirror></div><div id=3D"wiz_cm_1615729395847_7172" class=3D"wiz-=
code-container"  data-mode=3D"JavaScript" data-theme=3D"default">=
<textarea style=3D"display: none;"> 	private void serviceDoneExec=
utingLocked(ServiceRecord r, boolean inDestroying,=0A           =20=
boolean finishing) {=0A       // =B2=F0=D5=A8=B5=AF=0A       mAm.=
mHandler.removeMessages(ActivityManagerService.SERVICE_TIMEOUT_MS=
G, r.app);         =0A    }</textarea><wiz_code_mirror><div class=
=3D"CodeMirror cm-s-default" data-id=3D"wiz_cm_1615729395847_7172=
"><div style=3D"overflow: hidden; position: relative; width: 3px;=
 height: 0px; top: 20px; left: 34px;"><textarea autocorrect=3D"of=
f" autocapitalize=3D"off" spellcheck=3D"false" tabindex=3D"0" sty=
le=3D"position: absolute; bottom: -1em; padding: 0px; width: 1000=
px; height: 1em; outline: none;"></textarea></div><div class=3D"=20=
wiz-hide wiz_CodeMirror-vscrollbar" tabindex=3D"-1" cm-not-conten=
t=3D"true" style=3D"width: 18px; pointer-events: none;"><div styl=
e=3D"min-width: 1px; height: 0px;"></div></div><div class=3D" wiz=
-hide wiz_CodeMirror-hscrollbar" tabindex=3D"-1" cm-not-content=3D=
"true" style=3D"height: 18px; pointer-events: none;"><div style=3D=
"height: 100%; min-height: 1px; width: 0px;"></div></div><div cla=
ss=3D"CodeMirror-scrollbar-filler" cm-not-content=3D"true"></div>=
<div class=3D"CodeMirror-gutter-filler" cm-not-content=3D"true"><=
/div><div class=3D"CodeMirror-scroll" tabindex=3D"-1"><div class=3D=
"CodeMirror-sizer" style=3D"margin-left: 30px; margin-bottom: 0px=
; border-right-width: 30px; min-height: 128px; min-width: 738.125=
px; padding-right: 0px; padding-bottom: 0px;"><div style=3D"posit=
ion: relative; top: 0px;"><div class=3D"CodeMirror-lines" role=3D=
"presentation"><div role=3D"presentation" style=3D"position: rela=
tive; outline: none;"><div class=3D"CodeMirror-measure"><pre clas=
s=3D"CodeMirror-line-like">x</pre><div class=3D"CodeMirror-linenu=
mber CodeMirror-gutter-elt"><div>7</div></div></div><div class=3D=
"CodeMirror-measure"></div><div style=3D"position: relative; z-in=
dex: 1;"></div><div class=3D" wiz-hide wiz_CodeMirror-cursors" st=
yle=3D"visibility: hidden;"><div class=3D"CodeMirror-cursor" styl=
e=3D"left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div c=
lass=3D"CodeMirror-code" role=3D"presentation" style=3D""><div st=
yle=3D"position: relative;" class=3D"CodeMirror-activeline"><div=20=
class=3D" wiz-hide wiz_CodeMirror-activeline-background CodeMirro=
r-linebackground"></div><div class=3D"CodeMirror-gutter-backgroun=
d CodeMirror-activeline-gutter" style=3D"left: -30px; width: 30px=
;"></div><div class=3D"CodeMirror-gutter-wrapper CodeMirror-activ=
eline-gutter" style=3D"left: -30px;"><div class=3D"CodeMirror-lin=
enumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">=
1</div></div><pre class=3D"CodeMirror-line" role=3D"presentation"=
><span role=3D"presentation" style=3D"padding-right: 0.1px;"> <sp=
an class=3D"cm-tab" role=3D"presentation" cm-text=3D"	">   </span=
><span class=3D"cm-variable">private</span> <span class=3D"cm-key=
word">void</span> <span class=3D"cm-variable">serviceDoneExecutin=
gLocked</span>(<span class=3D"cm-variable">ServiceRecord</span> <=
span class=3D"cm-variable">r</span>, <span class=3D"cm-variable">=
boolean</span> <span class=3D"cm-variable">inDestroying</span>,</=
span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">2</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">            <span class=3D"cm-variable">boolean</span>=20=
<span class=3D"cm-variable">finishing</span>) {</span></pre></div=
><div class=3D"" style=3D"position: relative;"><div class=3D"Code=
Mirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeM=
irror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width=
: 21px;">3</div></div><pre class=3D"CodeMirror-line" role=3D"pres=
entation"><span role=3D"presentation" style=3D"padding-right: 0.1=
px;">       <span class=3D"cm-comment">// =B2=F0=D5=A8=B5=AF</spa=
n></span></pre></div><div class=3D"" style=3D"position: relative;=
"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"=
><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=
=3D"left: 0px; width: 21px;">4</div></div><pre class=3D"CodeMirro=
r-line" role=3D"presentation"><span role=3D"presentation" style=3D=
"padding-right: 0.1px;">       <span class=3D"cm-variable">mAm</s=
pan>.<span class=3D"cm-property">mHandler</span>.<span class=3D"c=
m-property">removeMessages</span>(<span class=3D"cm-variable">Act=
ivityManagerService</span>.<span class=3D"cm-property">SERVICE_TI=
MEOUT_MSG</span>, <span class=3D"cm-variable">r</span>.<span clas=
s=3D"cm-property">app</span>);         </span></pre></div><div st=
yle=3D"position: relative;" class=3D""><div class=3D"CodeMirror-g=
utter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-li=
nenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;"=
>5</div></div><pre class=3D"CodeMirror-line" role=3D"presentation=
"><span role=3D"presentation" style=3D"padding-right: 0.1px;">  =20=
 }</span></pre></div></div></div></div></div></div><div style=3D"=
position: absolute; height: 13px; width: 1px; border-bottom: 0px=20=
solid transparent; top: 128px;"></div><div class=3D"CodeMirror-gu=
tters" style=3D"height: 158px;"><div class=3D"CodeMirror-gutter C=
odeMirror-linenumbers" style=3D"width: 29px;"></div></div></div><=
/div></wiz_code_mirror></div><div>3. Input =CA=C2=BC=FE ANR =D4=B4=
=C2=EB=B7=D6=CE=F6</div><div>=D4=AD=C0=ED=CA=C7=D2=BB=B8=F6=A3=BA=
=C5=C5=C0=D7=B5=C4=B9=FD=B3=CC</div><div id=3D"wiz_cm_16157297135=
37_9917" class=3D"wiz-code-container"  data-mode=3D"JavaScript" d=
ata-theme=3D"default"><textarea style=3D"display: none;">void Inp=
utDispatcher::dispatchOnceInnerLocked(nsecs_t* nextWakeupTime) {=0A=
    // Ready to start a new event.=0A    // If we don't already h=
ave a pending event, go grab one.=0A    if (! mPendingEvent) {=0A=
        if (mInboundQueue.isEmpty()) {=0A            // Nothing t=
o do if there is no pending event.=0A            if (!mPendingEve=
nt) {=0A                return;=0A            }=0A        } =0A =20=
      // =BB=E1=C8=A5=D6=D8=D6=C3 ANR =B5=C4=D2=BB=D0=A9=D0=C5=CF=
=A2=A3=AC=C6=E4=CA=B5=BE=CD=CA=C7=D2=BB=B8=F6=B1=E4=C1=BF=0A    =20=
   // Get ready to dispatch the event.=0A        resetANRTimeouts=
Locked();=0A    }=0A=0A    case EventEntry::TYPE_KEY: {=0A      =20=
 KeyEntry* typedEntry =3D static_cast&lt;KeyEntry*&gt;(mPendingEv=
ent);=0A        done =3D dispatchKeyLocked(currentTime, typedEntr=
y, &amp;dropReason, nextWakeupTime);=0A        break;=0A    }=0A=0A=
    case EventEntry::TYPE_MOTION: {=0A        MotionEntry* typedE=
ntry =3D static_cast&lt;MotionEntry*&gt;(mPendingEvent);=0A     =20=
  done =3D dispatchMotionLocked(currentTime, typedEntry,=0A     =20=
          &amp;dropReason, nextWakeupTime);=0A        break;=0A =20=
  }=0A}=0A=0Avoid InputDispatcher::resetANRTimeoutsLocked() {=0A=20=
   mInputTargetWaitCause =3D INPUT_TARGET_WAIT_CAUSE_NONE;=0A}=0A=
=0Abool InputDispatcher::dispatchKeyLocked(nsecs_t currentTime, K=
eyEntry* entry,=0A        DropReason* dropReason, nsecs_t* nextWa=
keupTime) {=0A    // Identify targets.=0A    Vector&lt;InputTarge=
t&gt; inputTargets;=0A    int32_t injectionResult =3D findFocused=
WindowTargetsLocked(currentTime,=0A            entry, inputTarget=
s, nextWakeupTime);=0A    return true;=0A}=0A=0Aint32_t InputDisp=
atcher::handleTargetsNotReadyLocked(nsecs_t currentTime,=0A     =20=
  const EventEntry* entry,=0A        const sp&lt;InputApplication=
Handle&gt;&amp; applicationHandle,=0A        const sp&lt;InputWin=
dowHandle&gt;&amp; windowHandle,=0A        nsecs_t* nextWakeupTim=
e, const char* reason) {=0A        if (mInputTargetWaitCause !=3D=
 INPUT_TARGET_WAIT_CAUSE_APPLICATION_NOT_READY) {=0A            n=
secs_t timeout;=0A            if (windowHandle !=3D NULL) {=0A  =20=
             timeout =3D windowHandle-&gt;getDispatchingTimeout(D=
EFAULT_INPUT_DISPATCHING_TIMEOUT);=0A            } else if (appli=
cationHandle !=3D NULL) {=0A                timeout =3D applicati=
onHandle-&gt;getDispatchingTimeout(=0A                        DEF=
AULT_INPUT_DISPATCHING_TIMEOUT);=0A            } else {=0A      =20=
         timeout =3D DEFAULT_INPUT_DISPATCHING_TIMEOUT;=0A      =20=
     }=0A            mInputTargetWaitCause =3D INPUT_TARGET_WAIT_=
CAUSE_APPLICATION_NOT_READY;=0A            mInputTargetWaitTimeou=
tTime =3D currentTime + timeout;=0A        }=0A=0A    if (current=
Time &gt;=3D mInputTargetWaitTimeoutTime) {=0A        // c++ -&gt=
; Java -&gt; AMS -&gt; appNotResponeding=0A        onANRLocked(cu=
rrentTime, applicationHandle, windowHandle,=0A                ent=
ry-&gt;eventTime, mInputTargetWaitStartTime, reason);=0A=0A     =20=
  // Force poll loop to wake up immediately on next iteration onc=
e we get the=0A        // ANR response back from the policy.=0A =20=
      *nextWakeupTime =3D LONG_LONG_MIN;=0A        return INPUT_E=
VENT_INJECTION_PENDING;=0A    } else {=0A        // Force poll lo=
op to wake up when timeout is due.=0A        if (mInputTargetWait=
TimeoutTime &lt; *nextWakeupTime) {=0A            *nextWakeupTime=
 =3D mInputTargetWaitTimeoutTime;=0A        }=0A        return IN=
PUT_EVENT_INJECTION_PENDING;=0A    }=0A}=0A</textarea><wiz_code_m=
irror><div class=3D"CodeMirror cm-s-default" data-id=3D"wiz_cm_16=
15729713537_9917"><div style=3D"overflow: hidden; position: relat=
ive; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea a=
utocorrect=3D"off" autocapitalize=3D"off" spellcheck=3D"false" ta=
bindex=3D"0" style=3D"position: absolute; bottom: -1em; padding:=20=
0px; width: 1000px; height: 1em; outline: none;"></textarea></div=
><div class=3D" wiz-hide wiz_CodeMirror-vscrollbar" tabindex=3D"-=
1" cm-not-content=3D"true" style=3D"width: 18px; pointer-events:=20=
none;"><div style=3D"min-width: 1px; height: 0px;"></div></div><d=
iv class=3D" wiz-hide wiz_CodeMirror-hscrollbar" tabindex=3D"-1"=20=
cm-not-content=3D"true" style=3D"height: 18px; pointer-events: no=
ne;"><div style=3D"height: 100%; min-height: 1px; width: 0px;"></=
div></div><div class=3D"CodeMirror-scrollbar-filler" cm-not-conte=
nt=3D"true"></div><div class=3D"CodeMirror-gutter-filler" cm-not-=
content=3D"true"></div><div class=3D"CodeMirror-scroll" tabindex=3D=
"-1" draggable=3D"false"><div class=3D"CodeMirror-sizer" style=3D=
"margin-left: 30px; margin-bottom: 0px; border-right-width: 30px;=
 min-height: 1904px; min-width: 753.4px; padding-right: 0px; padd=
ing-bottom: 0px;"><div style=3D"position: relative; top: 0px;"><d=
iv class=3D"CodeMirror-lines" role=3D"presentation"><div role=3D"=
presentation" style=3D"position: relative; outline: none;"><div c=
lass=3D"CodeMirror-measure"><pre class=3D"CodeMirror-line-like">x=
</pre><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt">=
<div>84</div></div><div class=3D"CodeMirror-linenumber CodeMirror=
-gutter-elt"><div>130</div></div><div class=3D"CodeMirror-linenum=
ber CodeMirror-gutter-elt"><div>42</div></div><div class=3D"CodeM=
irror-linenumber CodeMirror-gutter-elt"><div>111</div></div><div=20=
class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"><div>92</di=
v></div><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt=
"><div>111</div></div><div class=3D"CodeMirror-linenumber CodeMir=
ror-gutter-elt"><div>99</div></div></div><div class=3D"CodeMirror=
-measure"></div><div style=3D"position: relative; z-index: 1;"></=
div><div class=3D" wiz-hide wiz_CodeMirror-cursors" style=3D"visi=
bility: hidden;"><div class=3D"CodeMirror-cursor" style=3D"left:=20=
4px; top: 0px; height: 24px;">&nbsp;</div></div><div class=3D"Cod=
eMirror-code" role=3D"presentation" style=3D""><div style=3D"posi=
tion: relative;" class=3D"CodeMirror-activeline"><div class=3D" w=
iz-hide wiz_CodeMirror-activeline-background CodeMirror-linebackg=
round"></div><div class=3D"CodeMirror-gutter-background CodeMirro=
r-activeline-gutter" style=3D"left: -30px; width: 30px;"></div><d=
iv class=3D"CodeMirror-gutter-wrapper CodeMirror-activeline-gutte=
r" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Cod=
eMirror-gutter-elt" style=3D"left: 0px; width: 21px;">1</div></di=
v><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=
=3D"presentation" style=3D"padding-right: 0.1px;"><span class=3D"=
cm-keyword">void</span> <span class=3D"cm-variable">InputDispatch=
er</span>::<span class=3D"cm-variable">dispatchOnceInnerLocked</s=
pan>(<span class=3D"cm-variable">nsecs_t</span><span class=3D"cm-=
operator">*</span> <span class=3D"cm-variable">nextWakeupTime</sp=
an>) {</span></pre></div><div style=3D"position: relative;"><div=20=
class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div c=
lass=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"lef=
t: 0px; width: 21px;">2</div></div><pre class=3D"CodeMirror-line"=
 role=3D"presentation"><span role=3D"presentation" style=3D"paddi=
ng-right: 0.1px;">    <span class=3D"cm-comment">// Ready to star=
t a new event.</span></span></pre></div><div style=3D"position: r=
elative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left:=
 -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-el=
t" style=3D"left: 0px; width: 21px;">3</div></div><pre class=3D"C=
odeMirror-line" role=3D"presentation"><span role=3D"presentation"=
 style=3D"padding-right: 0.1px;">    <span class=3D"cm-comment">/=
/ If we don't already have a pending event, go grab one.</span></=
span></pre></div><div style=3D"position: relative;" class=3D""><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">4</div></div><pre class=3D"CodeMirror-li=
ne" role=3D"presentation"><span role=3D"presentation" style=3D"pa=
dding-right: 0.1px;">    <span class=3D"cm-keyword">if</span> (<s=
pan class=3D"cm-operator">!</span> <span class=3D"cm-variable">mP=
endingEvent</span>) {</span></pre></div><div style=3D"position: r=
elative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left:=
 -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-el=
t" style=3D"left: 0px; width: 21px;">5</div></div><pre class=3D"C=
odeMirror-line" role=3D"presentation"><span role=3D"presentation"=
 style=3D"padding-right: 0.1px;">        <span class=3D"cm-keywor=
d">if</span> (<span class=3D"cm-variable">mInboundQueue</span>.<s=
pan class=3D"cm-property">isEmpty</span>()) {</span></pre></div><=
div style=3D"position: relative;"><div class=3D"CodeMirror-gutter=
-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenum=
ber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">6</d=
iv></div><pre class=3D"CodeMirror-line" role=3D"presentation"><sp=
an role=3D"presentation" style=3D"padding-right: 0.1px;">       =20=
    <span class=3D"cm-comment">// Nothing to do if there is no pe=
nding event.</span></span></pre></div><div style=3D"position: rel=
ative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -=
30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=
 style=3D"left: 0px; width: 21px;">7</div></div><pre class=3D"Cod=
eMirror-line" role=3D"presentation"><span role=3D"presentation" s=
tyle=3D"padding-right: 0.1px;">            <span class=3D"cm-keyw=
ord">if</span> (<span class=3D"cm-operator">!</span><span class=3D=
"cm-variable">mPendingEvent</span>) {</span></pre></div><div styl=
e=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapper=
" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Code=
Mirror-gutter-elt" style=3D"left: 0px; width: 21px;">8</div></div=
><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=3D=
"presentation" style=3D"padding-right: 0.1px;">                <s=
pan class=3D"cm-keyword">return</span>;</span></pre></div><div st=
yle=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapp=
er" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Co=
deMirror-gutter-elt" style=3D"left: 0px; width: 21px;">9</div></d=
iv><pre class=3D"CodeMirror-line" role=3D"presentation"><span rol=
e=3D"presentation" style=3D"padding-right: 0.1px;">            }<=
/span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">10</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">        } </span></pre></div><div style=3D"position: re=
lative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left:=20=
-30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt=
" style=3D"left: 0px; width: 21px;">11</div></div><pre class=3D"C=
odeMirror-line" role=3D"presentation"><span role=3D"presentation"=
 style=3D"padding-right: 0.1px;">        <span class=3D"cm-commen=
t">// =BB=E1=C8=A5=D6=D8=D6=C3 ANR =B5=C4=D2=BB=D0=A9=D0=C5=CF=A2=
=A3=AC=C6=E4=CA=B5=BE=CD=CA=C7=D2=BB=B8=F6=B1=E4=C1=BF</span></sp=
an></pre></div><div style=3D"position: relative;"><div class=3D"C=
odeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Co=
deMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; wi=
dth: 21px;">12</div></div><pre class=3D"CodeMirror-line" role=3D"=
presentation"><span role=3D"presentation" style=3D"padding-right:=
 0.1px;">        <span class=3D"cm-comment">// Get ready to dispa=
tch the event.</span></span></pre></div><div style=3D"position: r=
elative;" class=3D""><div class=3D"CodeMirror-gutter-wrapper" sty=
le=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirro=
r-gutter-elt" style=3D"left: 0px; width: 21px;">13</div></div><pr=
e class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"p=
resentation" style=3D"padding-right: 0.1px;">        <span class=3D=
"cm-variable">resetANRTimeoutsLocked</span>();</span></pre></div>=
<div style=3D"position: relative;"><div class=3D"CodeMirror-gutte=
r-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenu=
mber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">14<=
/div></div><pre class=3D"CodeMirror-line" role=3D"presentation"><=
span role=3D"presentation" style=3D"padding-right: 0.1px;">    }<=
/span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">15</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
:0.1px"></span></pre></div><div style=3D"position: relative;"><di=
v class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div=
 class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"l=
eft: 0px; width: 21px;">16</div></div><pre class=3D"CodeMirror-li=
ne" role=3D"presentation"><span role=3D"presentation" style=3D"pa=
dding-right: 0.1px;">    <span class=3D"cm-keyword">case</span> <=
span class=3D"cm-variable">EventEntry</span>::<span class=3D"cm-v=
ariable">TYPE_KEY</span>: {</span></pre></div><div style=3D"posit=
ion: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D=
"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gut=
ter-elt" style=3D"left: 0px; width: 21px;">17</div></div><pre cla=
ss=3D"CodeMirror-line" role=3D"presentation"><span role=3D"presen=
tation" style=3D"padding-right: 0.1px;">        <span class=3D"cm=
-variable">KeyEntry</span><span class=3D"cm-operator">*</span> <s=
pan class=3D"cm-variable">typedEntry</span> <span class=3D"cm-ope=
rator">=3D</span> <span class=3D"cm-variable">static_cast</span><=
span class=3D"cm-operator">&lt;</span><span class=3D"cm-variable"=
>KeyEntry</span><span class=3D"cm-operator">*&gt;</span>(<span cl=
ass=3D"cm-variable">mPendingEvent</span>);</span></pre></div><div=
 style=3D"position: relative;" class=3D""><div class=3D"CodeMirro=
r-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror=
-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21p=
x;">18</div></div><pre class=3D"CodeMirror-line" role=3D"presenta=
tion"><span role=3D"presentation" style=3D"padding-right: 0.1px;"=
>        <span class=3D"cm-variable">done</span> <span class=3D"c=
m-operator">=3D</span> <span class=3D"cm-variable">dispatchKeyLoc=
ked</span>(<span class=3D"cm-variable">currentTime</span>, <span=20=
class=3D"cm-variable">typedEntry</span>, <span class=3D"cm-operat=
or">&amp;</span><span class=3D"cm-variable">dropReason</span>, <s=
pan class=3D"cm-variable">nextWakeupTime</span>);</span></pre></d=
iv><div style=3D"position: relative;"><div class=3D"CodeMirror-gu=
tter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-lin=
enumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">=
19</div></div><pre class=3D"CodeMirror-line" role=3D"presentation=
"><span role=3D"presentation" style=3D"padding-right: 0.1px;">  =20=
     <span class=3D"cm-keyword">break</span>;</span></pre></div><=
div style=3D"position: relative;"><div class=3D"CodeMirror-gutter=
-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenum=
ber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">20</=
div></div><pre class=3D"CodeMirror-line" role=3D"presentation"><s=
pan role=3D"presentation" style=3D"padding-right: 0.1px;">    }</=
span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">21</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
:0.1px"></span></pre></div><div style=3D"position: relative;"><di=
v class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div=
 class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"l=
eft: 0px; width: 21px;">22</div></div><pre class=3D"CodeMirror-li=
ne" role=3D"presentation"><span role=3D"presentation" style=3D"pa=
dding-right: 0.1px;">    <span class=3D"cm-keyword">case</span> <=
span class=3D"cm-variable">EventEntry</span>::<span class=3D"cm-v=
ariable">TYPE_MOTION</span>: {</span></pre></div><div style=3D"po=
sition: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=
=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-=
gutter-elt" style=3D"left: 0px; width: 21px;">23</div></div><pre=20=
class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"pre=
sentation" style=3D"padding-right: 0.1px;">        <span class=3D=
"cm-variable">MotionEntry</span><span class=3D"cm-operator">*</sp=
an> <span class=3D"cm-variable">typedEntry</span> <span class=3D"=
cm-operator">=3D</span> <span class=3D"cm-variable">static_cast</=
span><span class=3D"cm-operator">&lt;</span><span class=3D"cm-var=
iable">MotionEntry</span><span class=3D"cm-operator">*&gt;</span>=
(<span class=3D"cm-variable">mPendingEvent</span>);</span></pre><=
/div><div style=3D"position: relative;" class=3D""><div class=3D"=
CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"C=
odeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; w=
idth: 21px;">24</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">        <span class=3D"cm-variable">done</span> <span c=
lass=3D"cm-operator">=3D</span> <span class=3D"cm-variable">dispa=
tchMotionLocked</span>(<span class=3D"cm-variable">currentTime</s=
pan>, <span class=3D"cm-variable">typedEntry</span>,</span></pre>=
</div><div style=3D"position: relative;"><div class=3D"CodeMirror=
-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-=
linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px=
;">25</div></div><pre class=3D"CodeMirror-line" role=3D"presentat=
ion"><span role=3D"presentation" style=3D"padding-right: 0.1px;">=
                <span class=3D"cm-operator">&amp;</span><span cla=
ss=3D"cm-variable">dropReason</span>, <span class=3D"cm-variable"=
>nextWakeupTime</span>);</span></pre></div><div style=3D"position=
: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"le=
ft: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter=
-elt" style=3D"left: 0px; width: 21px;">26</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right: 0.1px;">        <span class=3D"cm-keyw=
ord">break</span>;</span></pre></div><div style=3D"position: rela=
tive;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -3=
0px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=20=
style=3D"left: 0px; width: 21px;">27</div></div><pre class=3D"Cod=
eMirror-line" role=3D"presentation"><span role=3D"presentation" s=
tyle=3D"padding-right: 0.1px;">    }</span></pre></div><div style=
=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapper"=
 style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeM=
irror-gutter-elt" style=3D"left: 0px; width: 21px;">28</div></div=
><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=3D=
"presentation" style=3D"padding-right: 0.1px;">}</span></pre></di=
v><div style=3D"position: relative;"><div class=3D"CodeMirror-gut=
ter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-line=
number CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">2=
9</div></div><pre class=3D"CodeMirror-line" role=3D"presentation"=
><span role=3D"presentation" style=3D"padding-right:0.1px"></span=
></pre></div><div style=3D"position: relative;"><div class=3D"Cod=
eMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Code=
Mirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; widt=
h: 21px;">30</div></div><pre class=3D"CodeMirror-line" role=3D"pr=
esentation"><span role=3D"presentation" style=3D"padding-right: 0=
.1px;"><span class=3D"cm-keyword">void</span> <span class=3D"cm-v=
ariable">InputDispatcher</span>::<span class=3D"cm-variable">rese=
tANRTimeoutsLocked</span>() {</span></pre></div><div style=3D"pos=
ition: relative;" class=3D""><div class=3D"CodeMirror-gutter-wrap=
per" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber C=
odeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">31</div><=
/div><pre class=3D"CodeMirror-line" role=3D"presentation"><span r=
ole=3D"presentation" style=3D"padding-right: 0.1px;">    <span cl=
ass=3D"cm-variable">mInputTargetWaitCause</span> <span class=3D"c=
m-operator">=3D</span> <span class=3D"cm-variable">INPUT_TARGET_W=
AIT_CAUSE_NONE</span>;</span></pre></div><div style=3D"position:=20=
relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left=
: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-e=
lt" style=3D"left: 0px; width: 21px;">32</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right: 0.1px;">}</span></pre></div><div style=
=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapper"=
 style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeM=
irror-gutter-elt" style=3D"left: 0px; width: 21px;">33</div></div=
><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=3D=
"presentation" style=3D"padding-right:0.1px"></span></pre></div><=
div style=3D"position: relative;"><div class=3D"CodeMirror-gutter=
-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenum=
ber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">34</=
div></div><pre class=3D"CodeMirror-line" role=3D"presentation"><s=
pan role=3D"presentation" style=3D"padding-right: 0.1px;"><span c=
lass=3D"cm-variable">bool</span> <span class=3D"cm-variable">Inpu=
tDispatcher</span>::<span class=3D"cm-variable">dispatchKeyLocked=
</span>(<span class=3D"cm-variable">nsecs_t</span> <span class=3D=
"cm-variable">currentTime</span>, <span class=3D"cm-variable">Key=
Entry</span><span class=3D"cm-operator">*</span> <span class=3D"c=
m-variable">entry</span>,</span></pre></div><div style=3D"positio=
n: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"l=
eft: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutte=
r-elt" style=3D"left: 0px; width: 21px;">35</div></div><pre class=
=3D"CodeMirror-line" role=3D"presentation"><span role=3D"presenta=
tion" style=3D"padding-right: 0.1px;">        <span class=3D"cm-v=
ariable">DropReason</span><span class=3D"cm-operator">*</span> <s=
pan class=3D"cm-variable">dropReason</span>, <span class=3D"cm-va=
riable">nsecs_t</span><span class=3D"cm-operator">*</span> <span=20=
class=3D"cm-variable">nextWakeupTime</span>) {</span></pre></div>=
<div style=3D"position: relative;"><div class=3D"CodeMirror-gutte=
r-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenu=
mber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">36<=
/div></div><pre class=3D"CodeMirror-line" role=3D"presentation"><=
span role=3D"presentation" style=3D"padding-right: 0.1px;">    <s=
pan class=3D"cm-comment">// Identify targets.</span></span></pre>=
</div><div style=3D"position: relative;"><div class=3D"CodeMirror=
-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-=
linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px=
;">37</div></div><pre class=3D"CodeMirror-line" role=3D"presentat=
ion"><span role=3D"presentation" style=3D"padding-right: 0.1px;">=
    <span class=3D"cm-variable">Vector</span><span class=3D"cm-op=
erator">&lt;</span><span class=3D"cm-variable">InputTarget</span>=
<span class=3D"cm-operator">&gt;</span> <span class=3D"cm-variabl=
e">inputTargets</span>;</span></pre></div><div style=3D"position:=
 relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"lef=
t: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-=
elt" style=3D"left: 0px; width: 21px;">38</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right: 0.1px;">    <span class=3D"cm-variable=
">int32_t</span> <span class=3D"cm-variable">injectionResult</spa=
n> <span class=3D"cm-operator">=3D</span> <span class=3D"cm-varia=
ble">findFocusedWindowTargetsLocked</span>(<span class=3D"cm-vari=
able">currentTime</span>,</span></pre></div><div style=3D"positio=
n: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"l=
eft: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutte=
r-elt" style=3D"left: 0px; width: 21px;">39</div></div><pre class=
=3D"CodeMirror-line" role=3D"presentation"><span role=3D"presenta=
tion" style=3D"padding-right: 0.1px;">            <span class=3D"=
cm-variable">entry</span>, <span class=3D"cm-variable">inputTarge=
ts</span>, <span class=3D"cm-variable">nextWakeupTime</span>);</s=
pan></pre></div><div style=3D"position: relative;"><div class=3D"=
CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"C=
odeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; w=
idth: 21px;">40</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">    <span class=3D"cm-keyword">return</span> <span clas=
s=3D"cm-atom">true</span>;</span></pre></div><div style=3D"positi=
on: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"=
left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutt=
er-elt" style=3D"left: 0px; width: 21px;">41</div></div><pre clas=
s=3D"CodeMirror-line" role=3D"presentation"><span role=3D"present=
ation" style=3D"padding-right: 0.1px;">}</span></pre></div><div s=
tyle=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrap=
per" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber C=
odeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">42</div><=
/div><pre class=3D"CodeMirror-line" role=3D"presentation"><span r=
ole=3D"presentation" style=3D"padding-right:0.1px"></span></pre><=
/div><div style=3D"position: relative;" class=3D""><div class=3D"=
CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"C=
odeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; w=
idth: 21px;">43</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;"><span class=3D"cm-variable">int32_t</span> <span class=3D=
"cm-variable">InputDispatcher</span>::<span class=3D"cm-variable"=
>handleTargetsNotReadyLocked</span>(<span class=3D"cm-variable">n=
secs_t</span> <span class=3D"cm-variable">currentTime</span>,</sp=
an></pre></div><div style=3D"position: relative;"><div class=3D"C=
odeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Co=
deMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; wi=
dth: 21px;">44</div></div><pre class=3D"CodeMirror-line" role=3D"=
presentation"><span role=3D"presentation" style=3D"padding-right:=
 0.1px;">        <span class=3D"cm-keyword">const</span> <span cl=
ass=3D"cm-variable">EventEntry</span><span class=3D"cm-operator">=
*</span> <span class=3D"cm-variable">entry</span>,</span></pre></=
div><div style=3D"position: relative;"><div class=3D"CodeMirror-g=
utter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-li=
nenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;"=
>45</div></div><pre class=3D"CodeMirror-line" role=3D"presentatio=
n"><span role=3D"presentation" style=3D"padding-right: 0.1px;"> =20=
      <span class=3D"cm-keyword">const</span> <span class=3D"cm-v=
ariable">sp</span><span class=3D"cm-operator">&lt;</span><span cl=
ass=3D"cm-variable">InputApplicationHandle</span><span class=3D"c=
m-operator">&gt;&amp;</span> <span class=3D"cm-variable">applicat=
ionHandle</span>,</span></pre></div><div style=3D"position: relat=
ive;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30=
px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" s=
tyle=3D"left: 0px; width: 21px;">46</div></div><pre class=3D"Code=
Mirror-line" role=3D"presentation"><span role=3D"presentation" st=
yle=3D"padding-right: 0.1px;">        <span class=3D"cm-keyword">=
const</span> <span class=3D"cm-variable">sp</span><span class=3D"=
cm-operator">&lt;</span><span class=3D"cm-variable">InputWindowHa=
ndle</span><span class=3D"cm-operator">&gt;&amp;</span> <span cla=
ss=3D"cm-variable">windowHandle</span>,</span></pre></div><div cl=
ass=3D"" style=3D"position: relative;"><div class=3D"CodeMirror-g=
utter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-li=
nenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;"=
>47</div></div><pre class=3D"CodeMirror-line" role=3D"presentatio=
n"><span role=3D"presentation" style=3D"padding-right: 0.1px;"> =20=
      <span class=3D"cm-variable">nsecs_t</span><span class=3D"cm=
-operator">*</span> <span class=3D"cm-variable">nextWakeupTime</s=
pan>, <span class=3D"cm-keyword">const</span> <span class=3D"cm-v=
ariable">char</span><span class=3D"cm-operator">*</span> <span cl=
ass=3D"cm-variable">reason</span>) {</span></pre></div><div class=
=3D"" style=3D"position: relative;"><div class=3D"CodeMirror-gutt=
er-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linen=
umber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">48=
</div></div><pre class=3D"CodeMirror-line" role=3D"presentation">=
<span role=3D"presentation" style=3D"padding-right: 0.1px;">    =20=
   <span class=3D"cm-keyword">if</span> (<span class=3D"cm-variab=
le">mInputTargetWaitCause</span> <span class=3D"cm-operator">!=3D=
</span> <span class=3D"cm-variable">INPUT_TARGET_WAIT_CAUSE_APPLI=
CATION_NOT_READY</span>) {</span></pre></div><div style=3D"positi=
on: relative;" class=3D""><div class=3D"CodeMirror-gutter-wrapper=
" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Code=
Mirror-gutter-elt" style=3D"left: 0px; width: 21px;">49</div></di=
v><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=
=3D"presentation" style=3D"padding-right: 0.1px;">            <sp=
an class=3D"cm-variable">nsecs_t</span> <span class=3D"cm-variabl=
e">timeout</span>;</span></pre></div><div style=3D"position: rela=
tive;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -3=
0px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt"=20=
style=3D"left: 0px; width: 21px;">50</div></div><pre class=3D"Cod=
eMirror-line" role=3D"presentation"><span role=3D"presentation" s=
tyle=3D"padding-right: 0.1px;">            <span class=3D"cm-keyw=
ord">if</span> (<span class=3D"cm-variable">windowHandle</span> <=
span class=3D"cm-operator">!=3D</span> <span class=3D"cm-variable=
">NULL</span>) {</span></pre></div><div style=3D"position: relati=
ve;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30p=
x;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" st=
yle=3D"left: 0px; width: 21px;">51</div></div><pre class=3D"CodeM=
irror-line" role=3D"presentation"><span role=3D"presentation" sty=
le=3D"padding-right: 0.1px;">                <span class=3D"cm-va=
riable">timeout</span> <span class=3D"cm-operator">=3D</span> <sp=
an class=3D"cm-variable">windowHandle</span><span class=3D"cm-ope=
rator">-&gt;</span><span class=3D"cm-variable">getDispatchingTime=
out</span>(<span class=3D"cm-variable">DEFAULT_INPUT_DISPATCHING_=
TIMEOUT</span>);</span></pre></div><div style=3D"position: relati=
ve;" class=3D""><div class=3D"CodeMirror-gutter-wrapper" style=3D=
"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gut=
ter-elt" style=3D"left: 0px; width: 21px;">52</div></div><pre cla=
ss=3D"CodeMirror-line" role=3D"presentation"><span role=3D"presen=
tation" style=3D"padding-right: 0.1px;">            } <span class=
=3D"cm-keyword">else</span> <span class=3D"cm-keyword">if</span>=20=
(<span class=3D"cm-variable">applicationHandle</span> <span class=
=3D"cm-operator">!=3D</span> <span class=3D"cm-variable">NULL</sp=
an>) {</span></pre></div><div style=3D"position: relative;"><div=20=
class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div c=
lass=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"lef=
t: 0px; width: 21px;">53</div></div><pre class=3D"CodeMirror-line=
" role=3D"presentation"><span role=3D"presentation" style=3D"padd=
ing-right: 0.1px;">                <span class=3D"cm-variable">ti=
meout</span> <span class=3D"cm-operator">=3D</span> <span class=3D=
"cm-variable">applicationHandle</span><span class=3D"cm-operator"=
>-&gt;</span><span class=3D"cm-variable">getDispatchingTimeout</s=
pan>(</span></pre></div><div style=3D"position: relative;" class=3D=
""><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;=
"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" styl=
e=3D"left: 0px; width: 21px;">54</div></div><pre class=3D"CodeMir=
ror-line" role=3D"presentation"><span role=3D"presentation" style=
=3D"padding-right: 0.1px;">                        <span class=3D=
"cm-variable">DEFAULT_INPUT_DISPATCHING_TIMEOUT</span>);</span></=
pre></div><div style=3D"position: relative;"><div class=3D"CodeMi=
rror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMir=
ror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width:=20=
21px;">55</div></div><pre class=3D"CodeMirror-line" role=3D"prese=
ntation"><span role=3D"presentation" style=3D"padding-right: 0.1p=
x;">            } <span class=3D"cm-keyword">else</span> {</span>=
</pre></div><div style=3D"position: relative;" class=3D""><div cl=
ass=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div cla=
ss=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left:=
 0px; width: 21px;">56</div></div><pre class=3D"CodeMirror-line"=20=
role=3D"presentation"><span role=3D"presentation" style=3D"paddin=
g-right: 0.1px;">                <span class=3D"cm-variable">time=
out</span> <span class=3D"cm-operator">=3D</span> <span class=3D"=
cm-variable">DEFAULT_INPUT_DISPATCHING_TIMEOUT</span>;</span></pr=
e></div><div style=3D"position: relative;" class=3D""><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">57</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">            }</span></pre></div><div class=3D"" style=3D=
"position: relative;"><div class=3D"CodeMirror-gutter-wrapper" st=
yle=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirr=
or-gutter-elt" style=3D"left: 0px; width: 21px;">58</div></div><p=
re class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"=
presentation" style=3D"padding-right: 0.1px;">            <span c=
lass=3D"cm-variable">mInputTargetWaitCause</span> <span class=3D"=
cm-operator">=3D</span> <span class=3D"cm-variable">INPUT_TARGET_=
WAIT_CAUSE_APPLICATION_NOT_READY</span>;</span></pre></div><div c=
lass=3D"" style=3D"position: relative;"><div class=3D"CodeMirror-=
gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-l=
inenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;=
">59</div></div><pre class=3D"CodeMirror-line" role=3D"presentati=
on"><span role=3D"presentation" style=3D"padding-right: 0.1px;">=20=
           <span class=3D"cm-variable">mInputTargetWaitTimeoutTim=
e</span> <span class=3D"cm-operator">=3D</span> <span class=3D"cm=
-variable">currentTime</span> <span class=3D"cm-operator">+</span=
> <span class=3D"cm-variable">timeout</span>;</span></pre></div><=
div class=3D"" style=3D"position: relative;"><div class=3D"CodeMi=
rror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMir=
ror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; width:=20=
21px;">60</div></div><pre class=3D"CodeMirror-line" role=3D"prese=
ntation"><span role=3D"presentation" style=3D"padding-right: 0.1p=
x;">        }</span></pre></div><div class=3D"" style=3D"position=
: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"le=
ft: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter=
-elt" style=3D"left: 0px; width: 21px;">61</div></div><pre class=3D=
"CodeMirror-line" role=3D"presentation"><span role=3D"presentatio=
n" style=3D"padding-right:0.1px"></span></pre></div><div style=3D=
"position: relative;"><div class=3D"CodeMirror-gutter-wrapper" st=
yle=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirr=
or-gutter-elt" style=3D"left: 0px; width: 21px;">62</div></div><p=
re class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"=
presentation" style=3D"padding-right: 0.1px;">    <span class=3D"=
cm-keyword">if</span> (<span class=3D"cm-variable">currentTime</s=
pan> <span class=3D"cm-operator">&gt;=3D</span> <span class=3D"cm=
-variable">mInputTargetWaitTimeoutTime</span>) {</span></pre></di=
v><div class=3D"" style=3D"position: relative;"><div class=3D"Cod=
eMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"Code=
Mirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px; widt=
h: 21px;">63</div></div><pre class=3D"CodeMirror-line" role=3D"pr=
esentation"><span role=3D"presentation" style=3D"padding-right: 0=
.1px;">        <span class=3D"cm-comment">// c++ -&gt; Java -&gt;=
 AMS -&gt; appNotResponeding</span></span></pre></div><div style=3D=
"position: relative;" class=3D""><div class=3D"CodeMirror-gutter-=
wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumb=
er CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;">64</d=
iv></div><pre class=3D"CodeMirror-line" role=3D"presentation"><sp=
an role=3D"presentation" style=3D"padding-right: 0.1px;">       =20=
<span class=3D"cm-variable">onANRLocked</span>(<span class=3D"cm-=
variable">currentTime</span>, <span class=3D"cm-variable">applica=
tionHandle</span>, <span class=3D"cm-variable">windowHandle</span=
>,</span></pre></div><div style=3D"position: relative;"><div clas=
s=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=
=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0=
px; width: 21px;">65</div></div><pre class=3D"CodeMirror-line" ro=
le=3D"presentation"><span role=3D"presentation" style=3D"padding-=
right: 0.1px;">                <span class=3D"cm-variable">entry<=
/span><span class=3D"cm-operator">-&gt;</span><span class=3D"cm-v=
ariable">eventTime</span>, <span class=3D"cm-variable">mInputTarg=
etWaitStartTime</span>, <span class=3D"cm-variable">reason</span>=
);</span></pre></div><div style=3D"position: relative;"><div clas=
s=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=
=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0=
px; width: 21px;">66</div></div><pre class=3D"CodeMirror-line" ro=
le=3D"presentation"><span role=3D"presentation" style=3D"padding-=
right:0.1px"></span></pre></div><div style=3D"position: relative;=
"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"=
><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=
=3D"left: 0px; width: 21px;">67</div></div><pre class=3D"CodeMirr=
or-line" role=3D"presentation"><span role=3D"presentation" style=3D=
"padding-right: 0.1px;">        <span class=3D"cm-comment">// For=
ce poll loop to wake up immediately on next iteration once we get=
 the</span></span></pre></div><div style=3D"position: relative;">=
<div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><=
div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D=
"left: 0px; width: 21px;">68</div></div><pre class=3D"CodeMirror-=
line" role=3D"presentation"><span role=3D"presentation" style=3D"=
padding-right: 0.1px;">        <span class=3D"cm-comment">// ANR=20=
response back from the policy.</span></span></pre></div><div styl=
e=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapper=
" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Code=
Mirror-gutter-elt" style=3D"left: 0px; width: 21px;">69</div></di=
v><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=
=3D"presentation" style=3D"padding-right: 0.1px;">        <span c=
lass=3D"cm-operator">*</span><span class=3D"cm-variable">nextWake=
upTime</span> <span class=3D"cm-operator">=3D</span> <span class=3D=
"cm-variable">LONG_LONG_MIN</span>;</span></pre></div><div style=3D=
"position: relative;"><div class=3D"CodeMirror-gutter-wrapper" st=
yle=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirr=
or-gutter-elt" style=3D"left: 0px; width: 21px;">70</div></div><p=
re class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"=
presentation" style=3D"padding-right: 0.1px;">        <span class=
=3D"cm-keyword">return</span> <span class=3D"cm-variable">INPUT_E=
VENT_INJECTION_PENDING</span>;</span></pre></div><div style=3D"po=
sition: relative;"><div class=3D"CodeMirror-gutter-wrapper" style=
=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirror-=
gutter-elt" style=3D"left: 0px; width: 21px;">71</div></div><pre=20=
class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"pre=
sentation" style=3D"padding-right: 0.1px;">    } <span class=3D"c=
m-keyword">else</span> {</span></pre></div><div style=3D"position=
: relative;" class=3D""><div class=3D"CodeMirror-gutter-wrapper"=20=
style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMi=
rror-gutter-elt" style=3D"left: 0px; width: 21px;">72</div></div>=
<pre class=3D"CodeMirror-line" role=3D"presentation"><span role=3D=
"presentation" style=3D"padding-right: 0.1px;">        <span clas=
s=3D"cm-comment">// Force poll loop to wake up when timeout is du=
e.</span></span></pre></div><div style=3D"position: relative;"><d=
iv class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><di=
v class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"=
left: 0px; width: 21px;">73</div></div><pre class=3D"CodeMirror-l=
ine" role=3D"presentation"><span role=3D"presentation" style=3D"p=
adding-right: 0.1px;">        <span class=3D"cm-keyword">if</span=
> (<span class=3D"cm-variable">mInputTargetWaitTimeoutTime</span>=
 <span class=3D"cm-operator">&lt;</span> <span class=3D"cm-operat=
or">*</span><span class=3D"cm-variable">nextWakeupTime</span>) {<=
/span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">74</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
: 0.1px;">            <span class=3D"cm-operator">*</span><span c=
lass=3D"cm-variable">nextWakeupTime</span> <span class=3D"cm-oper=
ator">=3D</span> <span class=3D"cm-variable">mInputTargetWaitTime=
outTime</span>;</span></pre></div><div style=3D"position: relativ=
e;"><div class=3D"CodeMirror-gutter-wrapper" style=3D"left: -30px=
;"><div class=3D"CodeMirror-linenumber CodeMirror-gutter-elt" sty=
le=3D"left: 0px; width: 21px;">75</div></div><pre class=3D"CodeMi=
rror-line" role=3D"presentation"><span role=3D"presentation" styl=
e=3D"padding-right: 0.1px;">        }</span></pre></div><div styl=
e=3D"position: relative;"><div class=3D"CodeMirror-gutter-wrapper=
" style=3D"left: -30px;"><div class=3D"CodeMirror-linenumber Code=
Mirror-gutter-elt" style=3D"left: 0px; width: 21px;">76</div></di=
v><pre class=3D"CodeMirror-line" role=3D"presentation"><span role=
=3D"presentation" style=3D"padding-right: 0.1px;">        <span c=
lass=3D"cm-keyword">return</span> <span class=3D"cm-variable">INP=
UT_EVENT_INJECTION_PENDING</span>;</span></pre></div><div style=3D=
"position: relative;"><div class=3D"CodeMirror-gutter-wrapper" st=
yle=3D"left: -30px;"><div class=3D"CodeMirror-linenumber CodeMirr=
or-gutter-elt" style=3D"left: 0px; width: 21px;">77</div></div><p=
re class=3D"CodeMirror-line" role=3D"presentation"><span role=3D"=
presentation" style=3D"padding-right: 0.1px;">    }</span></pre><=
/div><div style=3D"position: relative;"><div class=3D"CodeMirror-=
gutter-wrapper" style=3D"left: -30px;"><div class=3D"CodeMirror-l=
inenumber CodeMirror-gutter-elt" style=3D"left: 0px; width: 21px;=
">78</div></div><pre class=3D"CodeMirror-line" role=3D"presentati=
on"><span role=3D"presentation" style=3D"padding-right: 0.1px;">}=
</span></pre></div><div style=3D"position: relative;"><div class=3D=
"CodeMirror-gutter-wrapper" style=3D"left: -30px;"><div class=3D"=
CodeMirror-linenumber CodeMirror-gutter-elt" style=3D"left: 0px;=20=
width: 21px;">79</div></div><pre class=3D"CodeMirror-line" role=3D=
"presentation"><span role=3D"presentation" style=3D"padding-right=
:0.1px"></span></pre></div></div></div></div></div></div><div sty=
le=3D"position: absolute; height: 13px; width: 1px; border-bottom=
: 0px solid transparent; top: 1904px;"></div><div class=3D"CodeMi=
rror-gutters" style=3D"height: 1934px;"><div class=3D"CodeMirror-=
gutter CodeMirror-linenumbers" style=3D"width: 29px;"></div></div=
></div></div></wiz_code_mirror></div><div>=CA=D3=C6=B5=A3=A8QQ=A3=
=A9=A3=BA=D5=D2 Grace <span data-wiz-span=3D"data-wiz-span" style=
=3D"color: rgb(255, 0, 0);">2746186102</span></div><div>QQ=C8=BA=A3=
=BA<span data-wiz-span=3D"data-wiz-span" style=3D"color: rgb(255,=
 0, 0);">546270670</span></div><div><br></div><div><br></div><div=
><br></div></body></html>

------=_Next_Part_0023980609.334--

------=_Next_Part_0071941827.467--

